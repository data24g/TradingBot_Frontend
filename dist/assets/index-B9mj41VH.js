import{r,u as Le,a as Fe,j as e,N as Ve,L as pe,b as Ce,c as ut,O as mt,d as gt,F as Ge,e as qe,f as Ye,g as _e,h as ht,i as Xe,k as pt,l as Je,m as bt,n as ft,o as je,p as yt,q as jt,s as Nt,t as vt,v as Oe,w as $e,x as Be,H as wt,R as St,y as le,z as Ct,A as kt}from"./react-vendor-BLaFO4rN.js";import{a as B}from"./axios-vendor-B9ygI19o.js";import{V as Pe,a as Dt,I as Me,d as Ne}from"./vendor-ck566IHf.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const g of o)if(g.type==="childList")for(const u of g.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function h(o){const g={};return o.integrity&&(g.integrity=o.integrity),o.referrerPolicy&&(g.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?g.credentials="include":o.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(o){if(o.ep)return;o.ep=!0;const g=h(o);fetch(o.href,g)}})();const Ze=r.createContext(void 0),Lt=({children:t})=>{const n=Le(),h=Fe(),[d,o]=r.useState(()=>localStorage.getItem("token")),g=!!d;r.useEffect(()=>{const l=localStorage.getItem("token");o(l)},[h.pathname]);const u=()=>{localStorage.removeItem("token"),o(null),n("/login")};return e.jsx(Ze.Provider,{value:{isAuthenticated:g,logout:u},children:t})},Qe=()=>{const t=r.useContext(Ze);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Tt=({children:t})=>{const{isAuthenticated:n}=Qe();return n?t:e.jsx(Ve,{to:"/login",replace:!0})},At=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Et=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M12 8v4l2 2"})]}),Ae=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),Pt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),Ue=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("line",{x1:"12",x2:"12",y1:"20",y2:"10"}),e.jsx("line",{x1:"18",x2:"18",y1:"20",y2:"4"}),e.jsx("line",{x1:"6",x2:"6",y1:"20",y2:"16"})]}),Mt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),It=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Ke=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Ft=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),ze=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("polyline",{points:"23 4 23 10 17 10"}),e.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Ut=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"}),e.jsx("path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"}),e.jsx("path",{d:"M12 2v2"}),e.jsx("path",{d:"M12 22v-2"}),e.jsx("path",{d:"m17 20.66-1-1.73"}),e.jsx("path",{d:"M11 10.27 7 3.34"}),e.jsx("path",{d:"m22 12-2 0"}),e.jsx("path",{d:"M4 12H2"}),e.jsx("path",{d:"m20.66 7-1.73-1"}),e.jsx("path",{d:"m3.34 7 1.73 1"}),e.jsx("path",{d:"m14 12 7.32-4.24"}),e.jsx("path",{d:"m7 20.66 1-1.73"}),e.jsx("path",{d:"M3.34 17 7 13.73"})]}),Rt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),e.jsx("polyline",{points:"12 19 5 12 12 5"})]}),Ot=()=>{const[t,n]=r.useState(""),[h,d]=r.useState(""),[o,g]=r.useState(""),[u,l]=r.useState(!1),c=Le(),a=async y=>{var m,i;y.preventDefault(),g(""),l(!0);try{const v=await B.post("https://api.binancebotpro.com/api/auth/login",{identifier:t,password:h});if(v.data&&v.data.token){const{token:S}=v.data;localStorage.setItem("token",S),c("/")}else g("Phản hồi từ server không hợp lệ (thiếu token).")}catch(v){if(console.error("Login error:",v),v.response){const S=((m=v.response.data)==null?void 0:m.message)||((i=v.response.data)==null?void 0:i.error);g(S||"Thông tin đăng nhập không chính xác.")}else v.request?g("Không thể kết nối đến server. Vui lòng kiểm tra mạng."):g("Đã xảy ra lỗi. Vui lòng thử lại.")}finally{l(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 p-4",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Ue,{className:"h-12 w-12 text-accent-yellow mb-2"}),e.jsx("h2",{className:"text-3xl font-bold text-center text-white",children:"TradingBot Dashboard"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-400",children:"Sign in to your account"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:a,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsx("div",{children:e.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-600 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-accent-yellow focus:border-accent-yellow focus:z-10 sm:text-sm rounded-t-md",placeholder:"Email address (admin@gmail.com)",value:t,onChange:y=>n(y.target.value),disabled:u})}),e.jsx("div",{children:e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-600 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-accent-yellow focus:border-accent-yellow focus:z-10 sm:text-sm rounded-b-md",placeholder:"Password",value:h,onChange:y=>d(y.target.value),disabled:u})})]}),o&&e.jsx("div",{className:"bg-red-900/30 border border-red-500/50 rounded p-2",children:e.jsx("p",{className:"text-sm text-red-400 text-center",children:o})}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-md text-gray-900 bg-accent-yellow hover:bg-accent-yellow-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-yellow focus:ring-offset-gray-800 transition-colors disabled:bg-accent-yellow/50 disabled:cursor-not-allowed",disabled:u,children:u?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-900",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in"})}),e.jsxs("div",{className:"text-sm text-center",children:[e.jsx("span",{className:"text-gray-400",children:"Don't have an account? "}),e.jsx(pe,{to:"/register",className:"font-medium text-accent-yellow hover:text-accent-yellow-dark",children:"Register here"})]})]})]})})},$t=({isOpen:t,onClose:n,onConfirm:h,title:d,children:o,confirmText:g="Confirm",cancelText:u="Cancel"})=>t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:n,children:e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-md border border-gray-700",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-gray-700",children:e.jsx("h3",{className:"text-xl font-semibold text-white",children:d})}),e.jsx("div",{className:"p-6 text-gray-400",children:o}),e.jsxs("div",{className:"flex justify-end gap-4 p-4 bg-gray-900/50 rounded-b-lg",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 rounded-md bg-gray-600 text-white font-semibold hover:bg-gray-500 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 focus:ring-offset-gray-800",children:u}),e.jsx("button",{onClick:h,className:"px-4 py-2 rounded-md bg-accent-yellow text-gray-900 font-semibold hover:bg-accent-yellow-dark transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-yellow focus:ring-offset-gray-800",children:g})]})]})}):null,Bt=({isOpen:t,setIsOpen:n})=>{const{logout:h}=Qe(),d=Fe(),o=Le(),[g,u]=r.useState(!1),[l,c]=r.useState(!1);r.useEffect(()=>{t&&n(!1)},[d.pathname]),r.useEffect(()=>{d.pathname==="/dca"&&c(!0)},[d.pathname]);const a=()=>{u(!0)},y=()=>{h(),u(!1)},m=({isActive:i})=>`flex items-center p-3 my-1 rounded-lg transition-colors ${i?"bg-accent-yellow text-gray-900 font-semibold":"text-gray-400 hover:bg-gray-700 hover:text-white"}`;return e.jsxs(e.Fragment,{children:[e.jsxs("aside",{className:`w-64 bg-gray-800 p-4 flex flex-col h-screen fixed z-30 transition-transform transform ${t?"translate-x-0":"-translate-x-full"} md:translate-x-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"hidden md:flex items-center",children:[e.jsx(Ue,{className:"h-8 w-8 text-accent-yellow mr-2"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"TradingBot"})]}),e.jsx("div",{className:"md:hidden"}),e.jsx("button",{onClick:()=>n(!1),className:"md:hidden text-gray-400 hover:text-white","aria-label":"Close sidebar",children:e.jsx(It,{className:"w-6 h-6"})})]}),e.jsxs("nav",{className:"flex-grow",children:[e.jsxs(Ce,{to:"/monitor",className:m,children:[e.jsx(Ae,{className:"w-5 h-5 mr-3"}),"Theo dõi thị trường và giao dịch"]}),e.jsxs(Ce,{to:"/strategy",className:m,children:[e.jsx(Ae,{className:"w-5 h-5 mr-3"}),"Chiến lược đánh Future"]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>{d.pathname==="/dca"?c(!l):(o("/dca?tab=REAL"),c(!0))},className:`w-full flex items-center p-3 my-1 rounded-lg transition-colors ${d.pathname==="/dca"?"bg-accent-yellow text-gray-900 font-semibold":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[e.jsx(Ae,{className:"w-5 h-5 mr-3"}),"Đầu tư dài hạn DCA"]}),l&&d.pathname==="/dca"&&e.jsxs("div",{className:"ml-8 mt-1 space-y-1",children:[e.jsx("button",{onClick:()=>{o("/dca?tab=DEMO"),n(!1)},className:`w-full flex items-center p-2 text-xs rounded-lg transition-colors ${d.search.includes("tab=DEMO")?"text-purple-400 font-semibold border-l-2 border-purple-400 bg-gray-700/30":"text-gray-500 hover:bg-gray-700/50 hover:text-gray-300"}`,children:"Plan DEMO"}),e.jsx("button",{onClick:()=>{o("/dca?tab=REAL"),n(!1)},className:`w-full flex items-center p-2 text-xs rounded-lg transition-colors ${d.search.includes("tab=REAL")?"text-green-400 font-semibold border-l-2 border-green-400 bg-gray-700/30":"text-gray-500 hover:bg-gray-700/50 hover:text-gray-300"}`,children:"Plan REAL"}),e.jsx("button",{onClick:()=>{o("/dca?tab=BACKTEST"),n(!1)},className:`w-full flex items-center p-2 text-xs rounded-lg transition-colors ${d.search.includes("tab=BACKTEST")?"text-blue-400 font-semibold border-l-2 border-blue-400 bg-gray-700/30":"text-gray-500 hover:bg-gray-700/50 hover:text-gray-300"}`,children:"Backtest"})]})]}),e.jsxs(Ce,{to:"/users",className:m,children:[e.jsx(At,{className:"w-5 h-5 mr-3"}),"Quản lý người dùng"]}),e.jsxs(Ce,{to:"/history",className:m,children:[e.jsx(Et,{className:"w-5 h-5 mr-3"}),"Lịch sử giao dịch"]})]}),e.jsx("div",{children:e.jsxs("button",{onClick:a,className:"flex items-center w-full p-3 rounded-lg text-gray-400 hover:bg-red-500/20 hover:text-accent-red transition-colors",children:[e.jsx(Pt,{className:"w-5 h-5 mr-3"}),"Logout"]})})]}),e.jsx($t,{isOpen:g,onClose:()=>u(!1),onConfirm:y,title:"Confirm Logout",children:e.jsx("p",{children:"Are you sure you want to log out of the system?"})})]})},Kt=({isOpen:t,onClose:n,onUserAdded:h})=>{const[d,o]=r.useState(""),[g,u]=r.useState(""),[l,c]=r.useState(""),[a,y]=r.useState(!1),[m,i]=r.useState(""),v=()=>{o(""),u(""),c(""),i(""),y(!1)},S=()=>{v(),n()},I=async T=>{if(T.preventDefault(),!d||!g||!l){i("All fields are required.");return}i(""),y(!0);try{const C=await B.post("https://api.binancebotpro.com/api/users",{username:d,apiKey:g,apiSecret:l}),A={id:C.data.id,username:C.data.username,isActive:C.data.tradingConfig.active,tradesToday:C.data.tradesToday,lastTradeDate:C.data.lastTradeDate};h(A),S()}catch(C){console.error("Failed to create user:",C),B.isAxiosError(C)&&C.response?i(`Failed to create user: ${C.response.data.message||C.message}`):i("An unexpected error occurred.")}finally{y(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:S,children:e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-md border border-gray-700",onClick:T=>T.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-gray-700",children:e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Add New User"})}),e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-1",children:"Username"}),e.jsx("input",{id:"username",type:"text",value:d,onChange:T=>o(T.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent-yellow text-white",required:!0,disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-300 mb-1",children:"API Key"}),e.jsx("input",{id:"apiKey",type:"password",value:g,onChange:T=>u(T.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent-yellow text-white",required:!0,autoComplete:"new-password",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apiSecret",className:"block text-sm font-medium text-gray-300 mb-1",children:"API Secret"}),e.jsx("input",{id:"apiSecret",type:"password",value:l,onChange:T=>c(T.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent-yellow text-white",required:!0,autoComplete:"new-password",disabled:a})]}),m&&e.jsx("p",{className:"text-sm text-accent-red",children:m})]}),e.jsxs("div",{className:"flex justify-end gap-4 p-4 bg-gray-900/50 rounded-b-lg",children:[e.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 rounded-md bg-gray-600 text-white font-semibold hover:bg-gray-500 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 focus:ring-offset-gray-800",disabled:a,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md bg-accent-yellow text-gray-900 font-semibold hover:bg-accent-yellow-dark transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-yellow focus:ring-offset-gray-800 disabled:bg-accent-yellow/50 disabled:cursor-not-allowed",disabled:a,children:a?"Creating...":"Create User"})]})]})]})}):null},zt=t=>{var n;if(t.startsWith("/monitor/"))return`${((n=t.split("/").pop())==null?void 0:n.replace("USDT",""))||"Chart"} Chart`;switch(t){case"/users":return"User Management";case"/history":return"Trade History";case"/monitor":return"Coin Monitor";default:return"Dashboard"}},Ht=()=>ut(),Wt=()=>{const[t,n]=r.useState(!1),h=Fe(),[d,o]=r.useState(!1),[g,u]=r.useState([]),l=r.useMemo(()=>zt(h.pathname),[h.pathname]),c=y=>{u(m=>[...m,y].sort((i,v)=>i.username.localeCompare(v.username)))},a=()=>{window.location.reload()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-200",children:[t&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden",onClick:()=>n(!1)}),e.jsx(Bt,{isOpen:t,setIsOpen:n}),e.jsxs("div",{className:"flex flex-col md:ml-64",children:[e.jsxs("header",{className:"md:hidden bg-accent-yellow p-4 grid grid-cols-3 items-center sticky top-0 z-10 border-b border-gray-900/20 shadow-md",children:[e.jsx("div",{className:"justify-self-start",children:e.jsx("button",{onClick:()=>n(!0),"aria-label":"Open sidebar",className:"text-gray-800 hover:text-black p-2 rounded-full hover:bg-black/10 transition-colors",children:e.jsx(Mt,{className:"w-6 h-6"})})}),e.jsx("h1",{className:"text-lg font-bold text-gray-900 text-center justify-self-center whitespace-nowrap",children:l}),e.jsxs("div",{className:"flex items-center gap-1 justify-self-end",children:[e.jsx("button",{onClick:a,className:"p-2 rounded-full text-gray-800 hover:bg-black/10 transition-colors",title:"Refresh page data",children:e.jsx(ze,{className:"w-5 h-5"})}),h.pathname==="/users"&&e.jsx("button",{onClick:()=>o(!0),className:"p-2 rounded-full text-gray-800 hover:bg-black/10 transition-colors",title:"Add User",children:e.jsx(Ke,{className:"w-5 h-5"})})]})]}),e.jsxs("header",{className:"hidden md:flex bg-gray-800 border-b border-gray-700 h-20 items-center justify-between px-10 sticky top-0 z-10",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:l}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:a,className:"p-2 rounded-full text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",title:"Refresh page data",children:e.jsx(ze,{className:"w-5 h-5"})}),h.pathname==="/users"&&e.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-gray-900 bg-accent-yellow hover:bg-accent-yellow-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-yellow focus:ring-offset-gray-800 transition-colors",children:[e.jsx(Ke,{className:"w-5 h-5 mr-2 -ml-1"}),"Add User"]})]})]}),e.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-10 overflow-y-auto",children:e.jsx(mt,{context:{users:g,setUsers:u,handleUserAdded:c}})})]})]}),e.jsx(Kt,{isOpen:d,onClose:()=>o(!1),onUserAdded:c})]})},Vt=({isOpen:t,onClose:n,user:h})=>{const[d,o]=r.useState(""),[g,u]=r.useState(""),[l,c]=r.useState(!1),[a,y]=r.useState(""),[m,i]=r.useState(""),v=()=>{o(""),u(""),y(""),i(""),c(!1)},S=()=>{v(),n()},I=async T=>{if(T.preventDefault(),!d||!g){y("Both API Key and Secret are required.");return}y(""),i(""),c(!0);try{await B.put(`https://api.binancebotpro.com/api/users/${h.id}/credentials`,{newApiKey:d,newApiSecret:g}),i("Credentials updated successfully!"),setTimeout(()=>{S()},1500)}catch(C){console.error("Failed to update credentials:",C),B.isAxiosError(C)&&C.response?y(`Update failed: ${C.response.data.message||C.message}`):y("An unexpected error occurred.")}finally{c(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:S,children:e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-md border border-gray-700",onClick:T=>T.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-gray-700",children:e.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Edit Credentials for ",e.jsx("span",{className:"text-accent-yellow",children:h.username})]})}),e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newApiKey",className:"block text-sm font-medium text-gray-300 mb-1",children:"New API Key"}),e.jsx("input",{id:"newApiKey",type:"password",value:d,onChange:T=>o(T.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent-yellow text-white",required:!0,autoComplete:"new-password",disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newApiSecret",className:"block text-sm font-medium text-gray-300 mb-1",children:"New API Secret"}),e.jsx("input",{id:"newApiSecret",type:"password",value:g,onChange:T=>u(T.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent-yellow text-white",required:!0,autoComplete:"new-password",disabled:l})]}),a&&e.jsx("p",{className:"text-sm text-accent-red",children:a}),m&&e.jsx("p",{className:"text-sm text-accent-green",children:m})]}),e.jsxs("div",{className:"flex justify-end gap-4 p-4 bg-gray-900/50 rounded-b-lg",children:[e.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 rounded-md bg-gray-600 text-white font-semibold hover:bg-gray-500 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 focus:ring-offset-gray-800",disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md bg-accent-yellow text-gray-900 font-semibold hover:bg-accent-yellow-dark transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-yellow focus:ring-offset-gray-800 disabled:bg-accent-yellow/50 disabled:cursor-not-allowed",disabled:l,children:l?"Updating...":"Update Credentials"})]})]})]})}):null},Gt=({isOpen:t,onClose:n,user:h,onConfigUpdated:d})=>{const[o,g]=r.useState(""),[u,l]=r.useState(!1),[c,a]=r.useState(""),[y,m]=r.useState("");r.useEffect(()=>{var I;h&&g(((I=h.orderSizeUSD)==null?void 0:I.toString())||"")},[h]);const i=()=>{a(""),m(""),l(!1)},v=()=>{i(),n()},S=async I=>{I.preventDefault();const T=Number(o);if(isNaN(T)||T<=0){a("Please enter a valid, positive number for the order size.");return}a(""),m(""),l(!0);try{await B.put(`https://api.binancebotpro.com/api/users/${h.id}/config`,{orderSizeUSD:T}),d({...h,orderSizeUSD:T}),m("Configuration updated successfully!"),setTimeout(()=>{v()},1500)}catch(C){console.error("Failed to update config:",C),B.isAxiosError(C)&&C.response?a(`Update failed: ${C.response.data.message||C.message}`):a("An unexpected error occurred.")}finally{l(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:v,children:e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-md border border-gray-700",onClick:I=>I.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-gray-700",children:e.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Configure Order Size for ",e.jsx("span",{className:"text-accent-yellow",children:h.username})]})}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"orderSize",className:"block text-sm font-medium text-gray-300 mb-1",children:"Order Size (USD)"}),e.jsx("input",{id:"orderSize",type:"number",value:o,onChange:I=>g(I.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent-yellow text-white",required:!0,placeholder:"e.g., 1000",min:"0",step:"any",disabled:u})]}),c&&e.jsx("p",{className:"text-sm text-accent-red",children:c}),y&&e.jsx("p",{className:"text-sm text-accent-green",children:y})]}),e.jsxs("div",{className:"flex justify-end gap-4 p-4 bg-gray-900/50 rounded-b-lg",children:[e.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 rounded-md bg-gray-600 text-white font-semibold hover:bg-gray-500 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 focus:ring-offset-gray-800",disabled:u,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md bg-accent-yellow text-gray-900 font-semibold hover:bg-accent-yellow-dark transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-yellow focus:ring-offset-gray-800 disabled:bg-accent-yellow/50 disabled:cursor-not-allowed",disabled:u,children:u?"Saving...":"Save Configuration"})]})]})]})}):null},qt=()=>e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-yellow"})}),Yt=()=>{const{users:t,setUsers:n}=Ht(),[h,d]=r.useState(!0),[o,g]=r.useState(null),[u,l]=r.useState(!1),[c,a]=r.useState(!1),[y,m]=r.useState(null),[i,v]=r.useState(null);r.useEffect(()=>{(async()=>{if(t.length>0){d(!1);return}try{const b=(await B.get("https://api.binancebotpro.com/api/users")).data.sort((k,f)=>k.username.localeCompare(f.username));n(b)}catch(L){console.error("Failed to fetch users:",L),B.isAxiosError(L)?g(`Failed to fetch users: ${L.message}. Please check your network connection and API server status.`):g("An unexpected error occurred while fetching users.")}finally{d(!1)}})()},[]);const S=x=>{m(x),l(!0)},I=x=>{m(x),a(!0)},T=x=>{n(L=>L.map(b=>b.id===x.id?x:b))},C=async x=>{if(i)return;v(x.id);const L=x.isActive?"deactivate":"activate";try{await B.put(`https://api.binancebotpro.com/api/users/${x.id}/${L}`),n(b=>b.map(k=>k.id===x.id?{...k,isActive:!k.isActive}:k))}catch(b){console.error(`Failed to ${L} user:`,b)}finally{v(null)}},A=x=>x?new Date(x).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"N/A",w=()=>h?e.jsx(qt,{}):o?e.jsx("p",{className:"text-center p-8 text-accent-red bg-red-500/10 rounded-md",children:o}):t.length===0?e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{className:"text-gray-400",children:'No users found. Get started by clicking "Add User" in the header.'})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 font-semibold",children:"Username"}),e.jsx("th",{className:"p-4 font-semibold",children:"Status"}),e.jsx("th",{className:"p-4 font-semibold text-center",children:"Trades Today"}),e.jsx("th",{className:"p-4 font-semibold text-right",children:"Order Size (USD)"}),e.jsx("th",{className:"p-4 font-semibold",children:"Last Trade Date"}),e.jsx("th",{className:"p-4 font-semibold",children:"User ID"}),e.jsx("th",{className:"p-4 font-semibold text-center",children:"Actions"})]})}),e.jsx("tbody",{children:t.map((x,L)=>e.jsxs("tr",{className:`border-t border-gray-700 ${L%2===0?"bg-gray-800":"bg-gray-800/50"}`,children:[e.jsx("td",{className:"p-4 font-semibold whitespace-nowrap",children:x.username}),e.jsx("td",{className:"p-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{htmlFor:`toggle-${x.id}`,className:"flex items-center cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:`toggle-${x.id}`,type:"checkbox",className:"sr-only",checked:x.isActive,onChange:()=>C(x),disabled:i===x.id}),e.jsx("div",{className:`block w-12 h-6 rounded-full transition-colors ${x.isActive?"bg-accent-green":"bg-gray-600"}`}),e.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${x.isActive?"translate-x-6":""}`})]}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-300",children:x.isActive?"Active":"Inactive"})]}),i===x.id&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-400"})]})}),e.jsx("td",{className:"p-4 text-center font-mono whitespace-nowrap",children:x.tradesToday}),e.jsx("td",{className:"p-4 text-right font-mono whitespace-nowrap",children:x.orderSizeUSD?`$${x.orderSizeUSD.toLocaleString()}`:e.jsx("span",{className:"text-gray-500",children:"Not Set"})}),e.jsx("td",{className:"p-4 text-gray-400 whitespace-nowrap",children:A(x.lastTradeDate)}),e.jsx("td",{className:"p-4 font-mono text-sm text-gray-500 whitespace-nowrap",children:x.id}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsx("button",{onClick:()=>I(x),className:"text-gray-400 hover:text-accent-yellow transition-colors","aria-label":`Configure user ${x.username}`,children:e.jsx(Ut,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(x),className:"text-gray-400 hover:text-accent-yellow transition-colors","aria-label":`Edit user ${x.username}`,children:e.jsx(Ft,{className:"w-5 h-5"})})]})})]},x.id))})]})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"User List"}),e.jsx("div",{className:"flex items-center gap-4",children:!h&&!o&&t.length>0&&e.jsxs("span",{className:"text-gray-400 font-medium bg-gray-700 px-3 py-1 rounded-full text-sm",children:[t.length," Users"]})})]}),w()]})}),y&&e.jsx(Vt,{isOpen:u,onClose:()=>l(!1),user:y}),y&&e.jsx(Gt,{isOpen:c,onClose:()=>a(!1),user:y,onConfigUpdated:T})]})};var et=(t=>(t.LONG="LONG",t.SHORT="SHORT",t))(et||{}),De=(t=>(t.OPEN="OPEN",t.CLOSED="CLOSED",t))(De||{});const He=t=>t.toISOString().split("T")[0],_t=()=>e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-yellow"})}),Xt=()=>{const[t,n]=r.useState([]),[h,d]=r.useState([]),[o,g]=r.useState(!0),[u,l]=r.useState(null),[c,a]=r.useState({coin:"",userId:"all",from:"",to:"",status:"all"});r.useEffect(()=>{(async()=>{try{const[x,L]=await Promise.all([B.get("https://api.binancebotpro.com/api/trades"),B.get("https://api.binancebotpro.com/api/users")]),b=x.data.map(k=>({...k,userName:k.username,side:k.side.toUpperCase(),status:k.status.toUpperCase()})).sort((k,f)=>new Date(f.entryTime).getTime()-new Date(k.entryTime).getTime());n(b),d(L.data.sort((k,f)=>k.username.localeCompare(f.username)))}catch(x){console.error("Failed to fetch trade history or users:",x),B.isAxiosError(x)?l(`Failed to fetch data: ${x.message}. Please check the API server.`):l("An unexpected error occurred while fetching data.")}finally{g(!1)}})()},[]);const y=w=>{a({...c,[w.target.name]:w.target.value})},m=(w,x)=>{a(L=>({...L,from:He(w),to:He(x)}))},i=()=>m(new Date,new Date),v=()=>{const w=new Date,x=new Date(w.setDate(w.getDate()-w.getDay())),L=new Date(x);L.setDate(L.getDate()+6),m(x,L)},S=()=>{const w=new Date,x=new Date(w.getFullYear(),w.getMonth(),1),L=new Date(w.getFullYear(),w.getMonth()+1,0);m(x,L)},I=()=>{a({coin:"",userId:"all",from:"",to:"",status:"all"})},{filteredTrades:T,summary:C}=r.useMemo(()=>{const w=t.filter(L=>{const b=new Date(L.entryTime),k=c.from?new Date(c.from):null,f=c.to?new Date(c.to):null;k&&k.setHours(0,0,0,0),f&&f.setHours(23,59,59,999);const F=c.userId==="all"?!0:L.userId===c.userId,$=c.coin?L.symbol.toLowerCase().includes(c.coin.toLowerCase()):!0,G=k?b>=k:!0,X=f?b<=f:!0,N=c.status==="all"?!0:L.status===c.status;return F&&$&&G&&X&&N});let x=null;if(c.userId!=="all"&&w.length>0){const L=w.reduce((b,k)=>b+(k.pnl||0),0);x={tradeCount:w.length,totalPnl:L}}return{filteredTrades:w,summary:x}},[c,t]),A=()=>{var w;return o?e.jsx(_t,{}):u?e.jsx("p",{className:"text-center p-8 text-accent-red bg-red-500/10 rounded-md",children:u}):t.length===0&&!o?e.jsx("p",{className:"text-center p-8 text-gray-400",children:"No trade history found."}):T.length===0?e.jsx("p",{className:"text-center p-8 text-gray-400",children:"No trades found for the selected filters."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 font-semibold",children:"User"}),e.jsx("th",{className:"p-4 font-semibold",children:"Symbol"}),e.jsx("th",{className:"p-4 font-semibold",children:"Side"}),e.jsx("th",{className:"p-4 font-semibold",children:"Status"}),e.jsx("th",{className:"p-4 font-semibold text-right",children:"Entry Price"}),e.jsx("th",{className:"p-4 font-semibold text-right",children:"Quantity"}),e.jsx("th",{className:"p-4 font-semibold text-right",children:"Order Size (USD)"}),e.jsx("th",{className:"p-4 font-semibold text-right",children:"PNL"}),e.jsx("th",{className:"p-4 font-semibold",children:"Entry Date"})]})}),e.jsx("tbody",{children:T.map((x,L)=>e.jsxs("tr",{className:`border-t border-gray-700 ${L%2===0?"bg-gray-800":"bg-gray-800/50"}`,children:[e.jsx("td",{className:"p-4 whitespace-nowrap",children:x.userName}),e.jsx("td",{className:"p-4 font-bold whitespace-nowrap",children:x.symbol}),e.jsx("td",{className:`p-4 font-semibold whitespace-nowrap ${x.side===et.LONG?"text-accent-green":"text-accent-red"}`,children:x.side}),e.jsx("td",{className:"p-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${x.status===De.OPEN?"bg-accent-green/20 text-accent-green":"bg-gray-600/50 text-gray-400"}`,children:x.status})}),e.jsxs("td",{className:"p-4 text-right whitespace-nowrap",children:["$",x.entryPrice.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:5})]}),e.jsx("td",{className:"p-4 text-right whitespace-nowrap",children:x.quantity.toFixed(4)}),e.jsxs("td",{className:"p-4 text-right whitespace-nowrap",children:["$",x.orderSizeUSD.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:`p-4 text-right font-mono whitespace-nowrap ${(x.pnl||0)>=0?"text-accent-green":"text-accent-red"}`,children:x.pnl!==null&&x.pnl!==void 0?`${(x.pnl||0)>=0?"+":""}${x.pnl.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:"—"}),e.jsx("td",{className:"p-4 text-gray-400 whitespace-nowrap",children:new Date(x.entryTime).toLocaleString("vi-VN")})]},x.id))}),C&&e.jsx("tfoot",{className:"bg-gray-700/50 border-t-2 border-accent-yellow",children:e.jsxs("tr",{children:[e.jsxs("td",{colSpan:7,className:"p-4 font-bold text-right text-white text-lg",children:["Summary for ",(w=h.find(x=>x.id===c.userId))==null?void 0:w.username]}),e.jsxs("td",{className:`p-4 text-right font-bold whitespace-nowrap text-lg ${C.totalPnl>=0?"text-accent-green":"text-accent-red"}`,children:["$",C.totalPnl.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("td",{className:"p-4 font-semibold text-gray-300 whitespace-nowrap",children:["(",C.tradeCount," trades)"]})]})})]})})};return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400 mb-1",children:"Coin"}),e.jsx("input",{type:"text",name:"coin",placeholder:"e.g., BTC",value:c.coin,onChange:y,className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent-yellow"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400 mb-1",children:"User"}),e.jsxs("select",{name:"userId",value:c.userId,onChange:y,className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent-yellow",children:[e.jsx("option",{value:"all",children:"All Users"}),h.map(w=>e.jsx("option",{value:w.id,children:w.username},w.id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:c.status,onChange:y,className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent-yellow",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:De.OPEN,children:"Open"}),e.jsx("option",{value:De.CLOSED,children:"Closed"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400 mb-1",children:"From Date"}),e.jsx("input",{type:"date",name:"from",value:c.from,onChange:y,className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent-yellow"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400 mb-1",children:"To Date"}),e.jsx("input",{type:"date",name:"to",value:c.to,onChange:y,className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent-yellow"})]}),e.jsx("div",{className:"flex flex-col justify-end",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 xl:grid-cols-2 gap-2",children:[e.jsx("button",{onClick:i,className:"bg-gray-600 text-white font-semibold py-2 px-3 rounded-md hover:bg-gray-500 transition-colors text-sm",children:"Today"}),e.jsx("button",{onClick:v,className:"bg-gray-600 text-white font-semibold py-2 px-3 rounded-md hover:bg-gray-500 transition-colors text-sm",children:"Week"}),e.jsx("button",{onClick:S,className:"bg-gray-600 text-white font-semibold py-2 px-3 rounded-md hover:bg-gray-500 transition-colors text-sm",children:"Month"}),e.jsx("button",{onClick:I,className:"bg-gray-600 text-white font-semibold py-2 px-3 rounded-md hover:bg-gray-500 transition-colors text-sm",children:"Clear"})]})})]})}),e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Trades List"}),!o&&!u&&e.jsxs("span",{className:"text-gray-400 font-medium bg-gray-700 px-3 py-1 rounded-full text-sm",children:[T.length," / ",t.length," trades shown"]})]}),A()]})]})},Jt=["BTCUSDT","ETHUSDT","SOLUSDT","BNBUSDT","XRPUSDT","DOGEUSDT","ADAUSDT","AVAXUSDT"],Zt={BTCUSDT:"Bitcoin",ETHUSDT:"Ethereum",SOLUSDT:"Solana",BNBUSDT:"Binance Coin",XRPUSDT:"Ripple",DOGEUSDT:"Dogecoin",ADAUSDT:"Cardano",AVAXUSDT:"Avalanche"},Qt=()=>e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-yellow"})}),es=({trend:t})=>{let n="bg-gray-600/50 text-gray-300";return t==="UPTREND"?n="bg-accent-green/20 text-accent-green":t==="DOWNTREND"&&(n="bg-accent-red/20 text-accent-red"),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${n}`,children:t||"N/A"})},ke=t=>{const n={minimumFractionDigits:2,maximumFractionDigits:t<1?5:2};return t.toLocaleString(void 0,n)},ts=()=>{const[t,n]=r.useState([]),[h,d]=r.useState(!0),[o,g]=r.useState(null);return r.useEffect(()=>{const u=async()=>{try{const c=Jt.map(m=>B.get(`https://api.binancebotpro.com/api/market-data/state/${m.toLowerCase()}`)),y=(await Promise.all(c)).filter(m=>m.data&&typeof m.data.currentPrice=="number").map(m=>{var v,S;const i=m.data;return{symbol:i.symbol,name:Zt[i.symbol]||i.symbol.replace("USDT",""),price:i.currentPrice,support:((v=i.supportLevels)==null?void 0:v[0])||0,resistance:((S=i.resistanceLevels)==null?void 0:S[0])||0,trend:i.trend}});n(y),o&&g(null)}catch(c){console.error("Failed to fetch market data:",c),t.length===0&&(B.isAxiosError(c)?g(`Failed to fetch market data: ${c.message}. Please check API server status.`):g("An unexpected error occurred while fetching market data."))}finally{h&&d(!1)}};u();const l=setInterval(u,1e4);return()=>clearInterval(l)},[]),h?e.jsx("div",{className:"space-y-8",children:e.jsx(Qt,{})}):o?e.jsx("div",{className:"space-y-8",children:e.jsx("p",{className:"text-center p-8 text-accent-red bg-red-500/10 rounded-md",children:o})}):e.jsx("div",{className:"space-y-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(u=>e.jsx(pe,{to:`/monitor/${u.symbol}`,className:"block group",children:e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-6 flex flex-col justify-between h-full transition-all group-hover:shadow-lg group-hover:shadow-accent-yellow/10 group-hover:border-accent-yellow/50 group-hover:-translate-y-1",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl font-bold text-white",children:u.symbol.replace("USDT","")}),e.jsx("span",{className:"text-sm text-gray-400 ml-2",children:u.name})]}),e.jsx(es,{trend:u.trend})]}),e.jsxs("div",{className:"text-3xl font-light text-white mb-6",children:["$",ke(u.price)]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Support"}),e.jsxs("span",{className:"font-mono text-white",children:["$",ke(u.support)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Resistance"}),e.jsxs("span",{className:"font-mono text-white",children:["$",ke(u.resistance)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Futures Price"}),e.jsxs("span",{className:"font-mono text-accent-yellow",children:["$",ke(u.price*1.005)]})]})]})]})},u.symbol))})})},ss=(t,n)=>{const h=[];for(let d=n-1;d<t.length;d++){const o=t.slice(d-n+1,d+1).reduce((g,u)=>g+u.close,0);h.push({time:t[d].time,value:o/n})}return h},rs=(t,n,h)=>{const d=[];for(let o=n-1;o<t.length;o++){const u=t.slice(o-n+1,o+1).map(a=>a.close),l=u.reduce((a,y)=>a+y,0)/n,c=Math.sqrt(u.map(a=>Math.pow(a-l,2)).reduce((a,y)=>a+y,0)/n);d.push({time:t[o].time,upper:l+h*c,middle:l,lower:l-h*c})}return d},te={TENKAN:"#2962FF",KIJUN:"#B71C1C",CHIKOU:"#43A047",SPAN_A:"#00897B",SPAN_B:"#E53935"},as=(t,n=9,h=26,d=52)=>{const o=[],g=[],u=[],l=[],c=[];for(let a=0;a<t.length;a++){const y=t[a].time;if(a>=n-1){const m=t.slice(a-n+1,a+1);o.push({time:y,value:(Math.max(...m.map(i=>i.high))+Math.min(...m.map(i=>i.low)))/2})}if(a>=h-1){const m=t.slice(a-h+1,a+1);g.push({time:y,value:(Math.max(...m.map(i=>i.high))+Math.min(...m.map(i=>i.low)))/2})}if(a>=h-1){const m=t.slice(a-n+1,a+1),i=(Math.max(...m.map(I=>I.high))+Math.min(...m.map(I=>I.low)))/2,v=t.slice(a-h+1,a+1),S=(Math.max(...v.map(I=>I.high))+Math.min(...v.map(I=>I.low)))/2;u.push({time:y,value:(i+S)/2})}if(a>=d-1){const m=t.slice(a-d+1,a+1);l.push({time:y,value:(Math.max(...m.map(i=>i.high))+Math.min(...m.map(i=>i.low)))/2})}c.push({time:y,value:t[a].close})}return{tenkan:o,kijun:g,senkouA:u,senkouB:l,chikou:c}},ns=(t,n=14)=>{const h=[];let d=0,o=0;for(let l=1;l<=n;l++){const c=t[l].close-t[l-1].close;c>0?d+=c:o+=Math.abs(c)}let g=d/n,u=o/n;for(let l=n+1;l<t.length;l++){const c=t[l].close-t[l-1].close,a=c>0?c:0,y=c<0?Math.abs(c):0;g=(g*(n-1)+a)/n,u=(u*(n-1)+y)/n;const m=g/u;h.push({time:t[l].time,value:100-100/(1+m)})}return h},ls=t=>{const n=.15384615384615385,h=2/27,d=2/10;let o=t[0].close,g=t[0].close;const u=[];for(let a=0;a<t.length;a++)o=t[a].close*n+o*(1-n),g=t[a].close*h+g*(1-h),u.push(o-g);let l=u[0];const c=[];for(let a=0;a<t.length;a++)l=u[a]*d+l*(1-d),a>26&&c.push({time:t[a].time,macd:u[a],signal:l,hist:u[a]-l});return c},os={"1m":"1m","5m":"5m","15m":"15m","1h":"1H","4h":"4H","1d":"1D"},Ie=t=>t?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(t):"...",is=({symbol:t,currentPrice:n,marketType:h,setMarketType:d,isMobile:o})=>{const[g,u]=r.useState([]),[l,c]=r.useState("custom"),[a,y]=r.useState(""),[m,i]=r.useState(""),[v,S]=r.useState(!1),[I,T]=r.useState(!1),[C,A]=r.useState(!1),[w,x]=r.useState([]),[L,b]=r.useState([]),[k,f]=r.useState([]),[F,$]=r.useState("LIMIT"),[G,X]=r.useState(""),[N,K]=r.useState(""),[q,re]=r.useState("COIN"),[_,ae]=r.useState(20),se=(t==null?void 0:t.replace("USDT",""))||"COIN";r.useEffect(()=>{(async()=>{try{const D=await B.get("https://api.binancebotpro.com/api/users");u(D.data)}catch(D){console.error("Failed to fetch users",D)}})()},[]);const Y=async p=>{const D=p.target.value;if(c(D),D==="custom"){y(""),i(""),Q();return}T(!0);try{const O=await B.get(`https://api.binancebotpro.com/api/users/${D}/keys`);if(O.data){const J=O.data.apiKey||"",z=O.data.apiSecret||"";y(J),i(z),de(J,z)}}catch(O){console.error("Failed to fetch keys",O),alert("Không thể lấy Key của user này."),Q()}finally{T(!1)}},Q=()=>{x([]),b([]),f([])},de=async(p=a,D=m)=>{if(!(!p||!D)){A(!0);try{const O="https://api.binancebotpro.com/api/binance/proxy",z=(await B.post(`${O}/spot/account`,{apiKey:p,apiSecret:D})).data.balances.filter(U=>parseFloat(U.free)>0||parseFloat(U.locked)>0).map(U=>({asset:U.asset,free:parseFloat(U.free),locked:parseFloat(U.locked)}));x(z);const fe=(await B.post(`${O}/futures/balance`,{apiKey:p,apiSecret:D})).data.filter(U=>parseFloat(U.balance)>0).map(U=>({asset:U.asset,balance:parseFloat(U.balance),availableBalance:parseFloat(U.availableBalance)}));b(fe);const Z=(await B.post(`${O}/futures/positions`,{apiKey:p,apiSecret:D})).data.filter(U=>parseFloat(U.positionAmt)!==0).map(U=>({symbol:U.symbol,positionSide:U.positionSide,positionAmt:parseFloat(U.positionAmt),entryPrice:parseFloat(U.entryPrice),markPrice:parseFloat(U.markPrice),unRealizedProfit:parseFloat(U.unRealizedProfit),leverage:parseInt(U.leverage),liquidationPrice:parseFloat(U.liquidationPrice)}));f(Z)}catch(O){console.error("Error fetching Binance data:",O)}finally{A(!1)}}},ee=p=>{if(p==="SPOT"){const D=w.find(O=>O.asset==="USDT");return D?D.free:0}else{const D=L.find(O=>O.asset==="USDT");return D?D.availableBalance:0}};r.useEffect(()=>{n&&G===""&&X(n.toString())},[n]);const ne=()=>F==="LIMIT"&&G?parseFloat(G):n,be=p=>{const D=ee(h),O=ne();O&&K(q==="USDT"?(D*(p/100)).toFixed(2):(D*(p/100)/O).toFixed(4))},me=r.useMemo(()=>{const p=parseFloat(N),D=ne();return!p||!D?null:q==="COIN"?`≈ ${(p*D).toLocaleString("en-US",{style:"currency",currency:"USD"})}`:`≈ ${(p/D).toFixed(5)} ${se}`},[N,q,G,n,F]),M=p=>{if(!a)return alert("Vui lòng chọn tài khoản hoặc nhập API Key");alert(`Đang gửi lệnh ${p} ${t} lên sàn... (Chức năng cần Backend Proxy)`)};return e.jsxs("div",{className:`bg-gray-800 border border-gray-700 flex flex-col overflow-hidden ${o?"border-t rounded-t-xl":"rounded-lg h-full"}`,children:[e.jsxs("div",{className:"flex bg-gray-900 p-1 rounded-t-lg",children:[e.jsx("button",{onClick:()=>d("SPOT"),className:`flex-1 py-2 text-xs font-bold rounded transition-all ${h==="SPOT"?"bg-gray-700 text-white":"text-gray-500 hover:text-gray-300"}`,children:"SPOT"}),e.jsx("button",{onClick:()=>d("FUTURES"),className:`flex-1 py-2 text-xs font-bold rounded transition-all ${h==="FUTURES"?"bg-accent-yellow text-gray-900":"text-gray-500 hover:text-gray-300"}`,children:"FUTURES"})]}),e.jsxs("div",{className:"overflow-y-auto p-3 custom-scrollbar space-y-4 flex-grow",children:[e.jsxs("div",{className:"space-y-3 border-b border-gray-700 pb-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-[10px] text-gray-400 font-bold uppercase",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ge,{})," Account"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsx("button",{onClick:()=>de(a,m),disabled:C,className:`text-xs ${C?"animate-spin text-accent-yellow":"text-gray-400 hover:text-white"}`,title:"Làm mới dữ liệu",children:e.jsx(qe,{})}),e.jsx("span",{className:a?"text-green-400":"text-gray-500",children:a?"Connected":"No Key"})]})]}),e.jsxs("select",{value:l,onChange:Y,className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-2 text-xs text-white outline-none cursor-pointer",children:[e.jsx("option",{value:"custom",children:"-- Nhập tay (Custom) --"}),g.map(p=>e.jsxs("option",{value:p.id,children:[p.username," (",p.isActive?"Active":"Inactive",")"]},p.id))]}),l==="custom"&&e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsx("input",{type:"text",placeholder:"API Key",value:a,onChange:p=>y(p.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded px-2 py-1.5 text-xs text-white"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:v?"text":"password",placeholder:"Secret Key",value:m,onChange:p=>i(p.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded px-2 py-1.5 text-xs text-white pr-8"}),e.jsx("button",{className:"absolute right-2 top-2 text-gray-400",onClick:()=>S(!v),children:v?e.jsx(Ye,{size:12}):e.jsx(_e,{size:12})})]})]}),a&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-gray-900/50 p-2 rounded border border-gray-600",children:[e.jsxs("div",{className:`text-center border-r border-gray-700 ${h==="SPOT"?"opacity-100":"opacity-50"}`,children:[e.jsx("p",{className:"text-[9px] text-gray-400 uppercase",children:"Spot USDT"}),e.jsx("p",{className:"text-xs font-bold text-white",children:Ie(ee("SPOT"))})]}),e.jsxs("div",{className:`text-center ${h==="FUTURES"?"opacity-100":"opacity-50"}`,children:[e.jsx("p",{className:"text-[9px] text-gray-400 uppercase",children:"Futures USDT"}),e.jsx("p",{className:"text-xs font-bold text-accent-yellow",children:Ie(ee("FUTURES"))})]})]})]}),h==="FUTURES"&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:"Leverage"}),e.jsxs("span",{className:"text-accent-yellow font-bold",children:[_,"x"]})]}),e.jsx("input",{type:"range",min:"1",max:"125",step:"1",value:_,onChange:p=>ae(Number(p.target.value)),className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-accent-yellow"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex bg-gray-900 rounded p-0.5",children:[e.jsx("button",{onClick:()=>$("LIMIT"),className:`flex-1 text-[10px] py-1.5 rounded transition ${F==="LIMIT"?"bg-gray-700 text-accent-yellow font-bold":"text-gray-500"}`,children:"Limit"}),e.jsx("button",{onClick:()=>$("MARKET"),className:`flex-1 text-[10px] py-1.5 rounded transition ${F==="MARKET"?"bg-gray-700 text-accent-yellow font-bold":"text-gray-500"}`,children:"Market"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-2 text-[10px] text-gray-500",children:"Price"}),e.jsx("input",{type:"number",inputMode:"decimal",disabled:F==="MARKET",value:F==="MARKET"?n:G,onChange:p=>X(p.target.value),className:`w-full bg-gray-900 border border-gray-600 rounded px-2 py-2 pl-10 text-sm text-right text-white font-mono ${F==="MARKET"&&"opacity-50"}`})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-2 text-[10px] text-gray-500 font-medium pointer-events-none",children:q==="COIN"?"Amount":"Total"}),e.jsx("input",{type:"number",inputMode:"decimal",value:N,onChange:p=>K(p.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded px-2 py-2 pl-12 pr-16 text-sm text-right text-white font-mono",placeholder:"0.00"}),e.jsx("button",{onClick:()=>re(p=>p==="COIN"?"USDT":"COIN"),className:"absolute right-1 top-1 bottom-1 px-2 bg-gray-700 hover:bg-gray-600 border border-gray-600 rounded flex items-center justify-center gap-1 cursor-pointer transition-all z-10 group",children:e.jsx("span",{className:"text-[10px] font-bold text-gray-200",children:q==="COIN"?se:"USDT"})})]}),e.jsx("div",{className:"text-right text-[10px] text-gray-500 h-3 font-mono",children:me})]}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:[25,50,75,100].map(p=>e.jsxs("button",{onClick:()=>be(p),className:"bg-gray-700 hover:bg-gray-600 text-[10px] py-1.5 rounded text-gray-400 hover:text-white transition",children:[p,"%"]},p))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pb-2",children:[e.jsx("button",{onClick:()=>M("BUY"),className:"bg-green-600 hover:bg-green-500 text-white font-bold py-3 rounded text-xs transition shadow-lg",children:h==="FUTURES"?"LONG":"BUY"}),e.jsx("button",{onClick:()=>M("SELL"),className:"bg-red-600 hover:bg-red-500 text-white font-bold py-3 rounded text-xs transition shadow-lg",children:h==="FUTURES"?"SHORT":"SELL"})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-2",children:[e.jsxs("div",{className:"flex gap-2 mb-2 items-center text-[10px] font-bold uppercase text-gray-500",children:[e.jsx(ht,{})," ",h==="SPOT"?"Spot Assets":"Open Positions"]}),e.jsxs("div",{className:"min-h-[120px]",children:[h==="SPOT"&&a&&e.jsx("div",{className:"space-y-2",children:w.length===0?e.jsx("p",{className:"text-center text-[10px] text-gray-500 py-2",children:"Ví trống"}):w.map((p,D)=>e.jsxs("div",{className:"bg-gray-900/50 p-2 rounded border border-gray-700 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-700 flex items-center justify-center text-[9px] font-bold text-white",children:p.asset[0]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold text-white",children:p.asset}),e.jsxs("p",{className:"text-[9px] text-gray-500",children:["Locked: ",p.locked]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-[11px] font-mono text-white",children:p.free})})]},D))}),h==="FUTURES"&&a&&e.jsx("div",{className:"space-y-2",children:k.length===0?e.jsx("p",{className:"text-center text-[10px] text-gray-500 py-2",children:"Không có lệnh mở"}):k.map((p,D)=>e.jsxs("div",{className:"bg-gray-900/50 p-2 rounded border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("span",{className:"text-[11px] font-bold text-white flex items-center gap-1",children:[p.symbol,e.jsxs("span",{className:`text-[9px] px-1 rounded ${parseFloat(p.positionAmt.toString())>0?"bg-green-900 text-green-400":"bg-red-900 text-red-400"}`,children:[parseFloat(p.positionAmt.toString())>0?"L":"S"," ",p.leverage,"x"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:`text-[11px] font-mono font-bold ${p.unRealizedProfit>=0?"text-green-400":"text-red-400"}`,children:[p.unRealizedProfit>0?"+":"",parseFloat(p.unRealizedProfit.toString()).toFixed(2)," u"]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-1 text-[9px] text-gray-400 mt-1",children:[e.jsxs("div",{children:["Size: ",e.jsx("span",{className:"text-gray-300",children:Math.abs(p.positionAmt)})]}),e.jsxs("div",{className:"text-center",children:["Entry: ",e.jsx("span",{className:"text-gray-300",children:parseFloat(p.entryPrice.toString()).toFixed(2)})]}),e.jsxs("div",{className:"text-right",children:["Liq: ",e.jsx("span",{className:"text-orange-400",children:parseFloat(p.liquidationPrice.toString()).toFixed(2)})]})]})]},D))})]})]})]})]})},cs=()=>{const{symbol:t}=gt(),[n,h]=r.useState("FUTURES"),[d,o]=r.useState(window.innerWidth<768),g=r.useRef(null),u=r.useRef(null),l=r.useRef(null),c=r.useRef(null),a=r.useRef(null),y=r.useRef(null),m=r.useRef({}),i=r.useRef({}),v=r.useRef([]),[S,I]=r.useState([]),[T,C]=r.useState("15m"),[A,w]=r.useState({sma:!1,bb:!1,ichimoku:!0,sr:!0,rsi:!1,macd:!1});r.useEffect(()=>{const b=()=>o(window.innerWidth<768);return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),r.useEffect(()=>{if(!g.current)return;l.current&&(l.current.remove(),l.current=null);const b=Pe(g.current,{layout:{background:{type:Me.Solid,color:"#1e1e1e"},textColor:"#d1d5db"},grid:{vertLines:{color:"#2d2d2d"},horzLines:{color:"#2d2d2d"}},crosshair:{mode:Dt.Normal},rightPriceScale:{borderColor:"#2d2d2d",scaleMargins:{top:.1,bottom:.1}},timeScale:{timeVisible:!0,secondsVisible:!1,rightOffset:d?2:5},handleScroll:{vertTouchDrag:!1},width:g.current.clientWidth,height:d?350:400});l.current=b,a.current=b.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderUpColor:"#22c55e",borderDownColor:"#ef4444",wickUpColor:"#22c55e",wickDownColor:"#ef4444"}),y.current=b.addHistogramSeries({priceFormat:{type:"volume"},priceScaleId:"",scaleMargins:{top:.85,bottom:0}});const k=()=>{l.current&&g.current&&l.current.applyOptions({width:g.current.clientWidth})};return window.addEventListener("resize",k),()=>{window.removeEventListener("resize",k),l.current&&(l.current.remove(),l.current=null)}},[d]),r.useEffect(()=>{if(u.current)if(A.rsi||A.macd){c.current&&(c.current.remove(),c.current=null);const b=Pe(u.current,{layout:{background:{type:Me.Solid,color:"#1e1e1e"},textColor:"#d1d5db"},grid:{vertLines:{color:"#2d2d2d"},horzLines:{color:"#2d2d2d"}},width:u.current.clientWidth,height:d?100:150,timeScale:{visible:!0},handleScroll:{vertTouchDrag:!1}});c.current=b;const k=()=>{c.current&&u.current&&c.current.applyOptions({width:u.current.clientWidth})};return window.addEventListener("resize",k),()=>{window.removeEventListener("resize",k),c.current&&(c.current.remove(),c.current=null)}}else c.current&&(c.current.remove(),c.current=null)},[A.rsi,A.macd,d]),r.useEffect(()=>{if(!t)return;let b=!1;const k=async()=>{try{const F=n==="FUTURES"?"https://fapi.binance.com/fapi/v1/klines":"https://api.binance.com/api/v3/klines",$=await B.get(F,{params:{symbol:t.toUpperCase(),interval:T,limit:500}});if(b)return;const G=$.data.map(X=>({time:X[0]/1e3,open:parseFloat(X[1]),high:parseFloat(X[2]),low:parseFloat(X[3]),close:parseFloat(X[4]),volume:parseFloat(X[5])}));I(G)}catch(F){console.error(F)}};k();const f=setInterval(k,2e3);return()=>{b=!0,clearInterval(f)}},[t,T,n]);const x=r.useMemo(()=>{if(S.length===0)return{support:null,resistance:null};const b=Math.min(100,S.length),k=S.slice(S.length-b);return{support:Math.min(...k.map(f=>f.low)),resistance:Math.max(...k.map(f=>f.high))}},[S]);r.useEffect(()=>{var k;if(!l.current||!a.current||S.length===0)return;a.current.setData(S),(k=y.current)==null||k.setData(S.map(f=>({time:f.time,value:f.volume,color:f.close>=f.open?"rgba(34, 197, 94, 0.3)":"rgba(239, 68, 68, 0.3)"})));const b=l.current;if(a.current)try{v.current.forEach(f=>{var F;try{(F=a.current)==null||F.removePriceLine(f)}catch{}}),v.current=[],A.sr&&(x.support&&v.current.push(a.current.createPriceLine({price:x.support,color:"#22c55e",lineWidth:1,lineStyle:Ne.Dashed,title:"SUP",axisLabelVisible:!0})),x.resistance&&v.current.push(a.current.createPriceLine({price:x.resistance,color:"#ef4444",lineWidth:1,lineStyle:Ne.Dashed,title:"RES",axisLabelVisible:!0})))}catch{}if(!A.sma&&m.current.sma&&(b.removeSeries(m.current.sma),delete m.current.sma),!A.bb&&m.current.bb&&(m.current.bb.forEach(f=>b.removeSeries(f)),delete m.current.bb),!A.ichimoku&&m.current.ich&&(Object.values(m.current.ich).forEach(f=>b.removeSeries(f)),delete m.current.ich),A.sma&&(m.current.sma||(m.current.sma=b.addLineSeries({color:"#F0B90B",lineWidth:2})),m.current.sma.setData(ss(S,20))),A.bb){m.current.bb||(m.current.bb=[b.addLineSeries({color:"#3b82f6",lineWidth:1}),b.addLineSeries({color:"#3b82f6",lineWidth:1})]);const f=rs(S,20,2);m.current.bb[0].setData(f.map(F=>({time:F.time,value:F.upper}))),m.current.bb[1].setData(f.map(F=>({time:F.time,value:F.lower})))}if(A.ichimoku){const f=as(S);m.current.ich||(m.current.ich={tenkan:b.addLineSeries({color:te.TENKAN,lineWidth:1}),kijun:b.addLineSeries({color:te.KIJUN,lineWidth:1}),senkouA:b.addLineSeries({color:te.SPAN_A,lineWidth:1}),senkouB:b.addLineSeries({color:te.SPAN_B,lineWidth:1}),chikou:b.addLineSeries({color:te.CHIKOU,lineWidth:1,lineStyle:Ne.Dashed})}),m.current.ich.tenkan.setData(f.tenkan),m.current.ich.kijun.setData(f.kijun),m.current.ich.senkouA.setData(f.senkouA),m.current.ich.senkouB.setData(f.senkouB),m.current.ich.chikou.setData(f.chikou)}if(c.current){const f=c.current;if(!A.rsi&&i.current.rsi&&(f.removeSeries(i.current.rsi),delete i.current.rsi),!A.macd&&i.current.macd&&(f.removeSeries(i.current.macd.hist),f.removeSeries(i.current.macd.macd),f.removeSeries(i.current.macd.signal),delete i.current.macd),A.rsi){if(!i.current.rsi){const F=f.addLineSeries({color:"#a78bfa",lineWidth:2});F.createPriceLine({price:70,color:"#ef4444",lineWidth:1,lineStyle:Ne.Dashed}),F.createPriceLine({price:30,color:"#22c55e",lineWidth:1,lineStyle:Ne.Dashed}),i.current.rsi=F}i.current.rsi.setData(ns(S))}if(A.macd){i.current.macd||(i.current.macd={hist:f.addHistogramSeries(),macd:f.addLineSeries({color:"#2962FF"}),signal:f.addLineSeries({color:"#FF6D00"})});const F=ls(S);i.current.macd.hist.setData(F.map($=>({time:$.time,value:$.hist,color:$.hist>0?"#26a69a":"#ef5350"}))),i.current.macd.macd.setData(F.map($=>({time:$.time,value:$.macd}))),i.current.macd.signal.setData(F.map($=>({time:$.time,value:$.signal})))}f.timeScale().fitContent()}},[S,A,x]);const L=S[S.length-1];return e.jsxs("div",{className:`flex flex-col lg:flex-row gap-4 bg-gray-950 text-gray-100 ${d?"p-2 pb-20":"p-4 h-[calc(100vh-80px)]"}`,children:[e.jsxs("div",{className:`flex-grow flex flex-col bg-gray-800 border border-gray-700 rounded-lg shadow-lg overflow-hidden relative ${d?"min-h-[450px]":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center p-2 border-b border-gray-800 bg-gray-900 z-20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{to:"/monitor",className:"p-2 bg-gray-800 rounded hover:bg-gray-700",children:e.jsx(Rt,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-base font-bold flex gap-2",children:[t," ",e.jsx("span",{className:"text-[10px] bg-gray-800 px-1.5 py-0.5 rounded text-gray-400",children:n})]}),e.jsx("p",{className:"text-lg font-mono font-bold text-white leading-none",children:Ie(L==null?void 0:L.close)})]})]}),e.jsx("div",{className:"flex gap-1 overflow-x-auto no-scrollbar max-w-[150px] lg:max-w-none",children:Object.keys(os).map(b=>e.jsx("button",{onClick:()=>C(b),className:`px-2 py-1 text-[10px] rounded font-bold whitespace-nowrap ${T===b?"bg-blue-600 text-white":"bg-gray-800 text-gray-400"}`,children:b},b))})]}),e.jsxs("div",{className:"flex gap-2 p-2 bg-gray-900 border-b border-gray-800 overflow-x-auto no-scrollbar text-[10px] font-bold",children:[e.jsx("button",{onClick:()=>w(b=>({...b,sr:!b.sr})),className:`px-3 py-1 rounded whitespace-nowrap ${A.sr?"bg-gray-600 text-white":"bg-gray-700 text-gray-400"}`,children:"S/R"}),e.jsx("button",{onClick:()=>w(b=>({...b,sma:!b.sma})),className:`px-3 py-1 rounded whitespace-nowrap ${A.sma?"bg-yellow-900/50 text-yellow-400":"bg-gray-700 text-gray-400"}`,children:"SMA"}),e.jsx("button",{onClick:()=>w(b=>({...b,bb:!b.bb})),className:`px-3 py-1 rounded whitespace-nowrap ${A.bb?"bg-blue-900/50 text-blue-400":"bg-gray-700 text-gray-400"}`,children:"BB"}),e.jsx("button",{onClick:()=>w(b=>({...b,ichimoku:!b.ichimoku})),className:`px-3 py-1 rounded whitespace-nowrap ${A.ichimoku?"bg-green-900/50 text-green-400":"bg-gray-700 text-gray-400"}`,children:"Cloud"}),e.jsx("div",{className:"w-px h-4 bg-gray-700 mx-1"}),e.jsx("button",{onClick:()=>w(b=>({...b,rsi:!b.rsi,macd:!1})),className:`px-3 py-1 rounded whitespace-nowrap ${A.rsi?"bg-purple-900/50 text-purple-400":"bg-gray-700 text-gray-400"}`,children:"RSI"}),e.jsx("button",{onClick:()=>w(b=>({...b,macd:!b.macd,rsi:!1})),className:`px-3 py-1 rounded whitespace-nowrap ${A.macd?"bg-blue-900/50 text-blue-400":"bg-gray-700 text-gray-400"}`,children:"MACD"})]}),A.ichimoku&&e.jsxs("div",{className:"absolute top-[88px] md:top-16 left-4 z-10 bg-gray-900/80 backdrop-blur-sm p-2 rounded border border-gray-700 text-[10px] space-y-1 shadow-lg pointer-events-none",children:[e.jsx("div",{className:"font-bold text-gray-300 mb-1 border-b border-gray-700 pb-1",children:"Ichimoku"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:te.TENKAN}})," ",e.jsx("span",{style:{color:te.TENKAN},children:"Tenkan"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:te.KIJUN}})," ",e.jsx("span",{style:{color:te.KIJUN},children:"Kijun"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:te.SPAN_A}})," ",e.jsx("span",{style:{color:te.SPAN_A},children:"Span A"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:te.SPAN_B}})," ",e.jsx("span",{style:{color:te.SPAN_B},children:"Span B"})]})]}),e.jsxs("div",{className:"flex-grow flex flex-col relative bg-[#121212]",children:[e.jsx("div",{className:"flex-grow relative border-b border-gray-800",children:e.jsx("div",{ref:g,className:"absolute inset-0"})}),(A.rsi||A.macd)&&e.jsx("div",{className:`${d?"h-[120px]":"h-[150px]"} relative border-t border-gray-700 bg-[#1e1e1e]`,children:e.jsx("div",{ref:u,className:"absolute inset-0"})})]})]}),e.jsx("div",{className:"w-full lg:w-80 flex-shrink-0 bg-gray-900 z-30",children:e.jsx(is,{symbol:t||"",currentPrice:(L==null?void 0:L.close)||0,marketType:n,setMarketType:h,isMobile:d})})]})},ds=()=>{const t=Le(),[n,h]=r.useState({username:"",email:"",password:"",confirmPassword:"",referrerCode:""}),[d,o]=r.useState(""),[g,u]=r.useState(""),[l,c]=r.useState(!1),a=m=>{h({...n,[m.target.name]:m.target.value})},y=async m=>{if(m.preventDefault(),o(""),u(""),n.password!==n.confirmPassword){o("Passwords do not match.");return}c(!0);try{(await B.post("https://api.binancebotpro.com/api/auth/register",{username:n.username,email:n.email,password:n.password,referrerCode:n.referrerCode})).status===200&&(u("Đăng ký thành công"),setTimeout(()=>{t("/login")},2e3))}catch(i){console.error("Registration failed:",i),B.isAxiosError(i)&&i.response?o(i.response.data.message||"Registration failed. Please try again."):o("An unexpected error occurred during registration.")}finally{c(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 p-4",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Ue,{className:"h-12 w-12 text-accent-yellow mb-2"}),e.jsx("h2",{className:"text-3xl font-bold text-center text-white",children:"Create Account"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-400",children:"Join TradingBot Dashboard"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsx("div",{children:e.jsx("input",{name:"username",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-600 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-accent-yellow focus:border-accent-yellow focus:z-10 sm:text-sm rounded-t-md",placeholder:"Username",value:n.username,onChange:a,disabled:l})}),e.jsx("div",{children:e.jsx("input",{name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-600 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-accent-yellow focus:border-accent-yellow focus:z-10 sm:text-sm",placeholder:"Email address",value:n.email,onChange:a,disabled:l})}),e.jsx("div",{children:e.jsx("input",{name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-600 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-accent-yellow focus:border-accent-yellow focus:z-10 sm:text-sm",placeholder:"Password",value:n.password,onChange:a,disabled:l})}),e.jsx("div",{children:e.jsx("input",{name:"confirmPassword",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-600 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-accent-yellow focus:border-accent-yellow focus:z-10 sm:text-sm",placeholder:"Confirm Password",value:n.confirmPassword,onChange:a,disabled:l})}),e.jsx("div",{children:e.jsx("input",{name:"referrerCode",type:"text",className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-600 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-accent-yellow focus:border-accent-yellow focus:z-10 sm:text-sm rounded-b-md",placeholder:"Referrer Code (Optional)",value:n.referrerCode,onChange:a,disabled:l})})]}),d&&e.jsx("p",{className:"text-sm text-accent-red text-center",children:d}),g&&e.jsx("p",{className:"text-sm text-accent-green text-center",children:g}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-md text-gray-900 bg-accent-yellow hover:bg-accent-yellow-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-yellow focus:ring-offset-gray-800 transition-colors disabled:bg-accent-yellow/50 disabled:cursor-not-allowed",disabled:l,children:l?"Registering...":"Register"})}),e.jsxs("div",{className:"text-sm text-center",children:[e.jsx("span",{className:"text-gray-400",children:"Already have an account? "}),e.jsx(pe,{to:"/login",className:"font-medium text-accent-yellow hover:text-accent-yellow-dark",children:"Sign in"})]})]})]})})},xs=[{id:"BTC",name:"Bitcoin"},{id:"ETH",name:"Ethereum"},{id:"BNB",name:"Binance Coin"},{id:"SOL",name:"Solana"},{id:"XRP",name:"Ripple"},{id:"DOGE",name:"Dogecoin"},{id:"ADA",name:"Cardano"},{id:"AVAX",name:"Avalanche"},{id:"LINK",name:"Chainlink"},{id:"DOT",name:"Polkadot"},{id:"TRX",name:"Tron"},{id:"LTC",name:"Litecoin"}];function us(){const[t,n]=r.useState("CLASSIC"),[h,d]=r.useState("BTC"),[o,g]=r.useState(null),[u,l]=r.useState(!0),[c,a]=r.useState(1e3),[y,m]=r.useState(10),[i,v]=r.useState("SHORT"),[S,I]=r.useState(6),[T,C]=r.useState(""),[A,w]=r.useState(""),[x,L]=r.useState(5),[b,k]=r.useState(1.5),[f,F]=r.useState(null);r.useEffect(()=>{(async()=>{l(!0);try{const K=await B.get(`https://fapi.binance.com/fapi/v1/ticker/price?symbol=${h}USDT`),q=parseFloat(K.data.price);g(q),i==="SHORT"?(C(q.toFixed(2)),w((q*1.1).toFixed(2))):(w(q.toFixed(2)),C((q*.9).toFixed(2)))}catch(K){console.error("Error init price",K)}finally{l(!1)}})()},[h,i]),r.useEffect(()=>{const N=setInterval(async()=>{try{const K=await B.get(`https://fapi.binance.com/fapi/v1/ticker/price?symbol=${h}USDT`);g(parseFloat(K.data.price))}catch{}},5e3);return()=>clearInterval(N)},[h]),r.useEffect(()=>{F(null)},[h,i,c,y,S,T,A,x,t,b]);const $=N=>{if(!N&&N!==0)return"...";let K=2;return N<1e-4?K=8:N<.01?K=6:N<1?K=4:N<50&&(K=3),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:K}).format(N)},G=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}).format(N),X=()=>{if(!o)return;let N=[],K=t==="CLASSIC"?S:x;if(t==="CLASSIC"){let D=c*y*.02;for(let O=0;O<K;O++){const J=1.5*O,z=i==="LONG"?o*(1-J/100):o*(1+J/100);O>0&&(D=D*2),N.push({level:O+1,price:z,volume:D,coinSize:D/z,weight:0})}}else{const M=parseFloat(T),p=parseFloat(A);if(!M||!p||M>=p)return alert("Vui lòng nhập khoảng giá Min < Max hợp lệ.");let D=0;for(let Z=0;Z<K;Z++)D+=Math.pow(b,Z);const J=c*y/D;let z,ge;i==="LONG"?(z=Math.min(o,p),ge=M):(z=Math.max(o,M),ge=p);const fe=Math.abs(z-ge),xe=K>1?fe/(K-1):0;for(let Z=0;Z<K;Z++){let U=0;i==="LONG"?U=z-xe*Z:U=z+xe*Z,i==="LONG"&&U<M&&(U=M),i==="SHORT"&&U>p&&(U=p);const ve=J*Math.pow(b,Z);N.push({level:Z+1,price:U,volume:ve,coinSize:ve/U,weight:Math.pow(b,Z)})}}const q=N.reduce((M,p)=>M+p.volume,0),re=N.reduce((M,p)=>M+p.coinSize,0),_=q/re,ae=q/y,se=c-ae;let Y=0,Q=0,de=0,ee=!1,ne=!0;if(se<0)ee=!0;else{const M=se/re,p=_*.004;i==="LONG"?(Y=_-M+p,Q=Y*1.005,t==="RANGE"&&Y>=parseFloat(T)&&(ne=!1)):(Y=_+M-p,Q=Y*.995,t==="RANGE"&&Y<=parseFloat(A)&&(ne=!1)),Q<0&&(Q=0),Y<0&&(Y=0),de=Math.abs(_-Q)*re}const me=[2,5,10,20].map(M=>{let p=i==="LONG"?_*(1+M/100):_*(1-M/100);const D=re*Math.abs(p-_),O=ae>0?D/ae*100:0;return{targetPercent:M,price:p,pnl:D,roe:O}});F({plans:N,exitPlans:me,avgPrice:_,totalVolume:q,totalMargin:ae,liquidationPrice:ee?null:Y,suggestedSL:ee?null:Q,lossAtSL:de,isRekt:ee,isSafeRange:ne})};return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 p-3 md:p-6 pb-20",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6",children:[e.jsxs(pe,{to:"/",className:"flex items-center gap-2 p-2 px-4 rounded-full bg-gray-800 hover:bg-gray-700 transition text-gray-300 hover:text-white text-sm",children:[e.jsx(Xe,{})," Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Futures Strategy Planner"}),e.jsxs("p",{className:"text-gray-400 text-xs sm:text-sm",children:["Chiến lược ",i," ",h]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-gray-800 border border-gray-700 rounded-xl p-5 shadow-lg h-fit",children:[e.jsxs("div",{className:"flex p-1 bg-gray-900 rounded-lg mb-6 border border-gray-700",children:[e.jsx("button",{onClick:()=>n("CLASSIC"),className:`flex-1 py-2 text-xs font-bold rounded transition-all ${t==="CLASSIC"?"bg-blue-600 text-white shadow":"text-gray-400 hover:text-white"}`,children:"CLASSIC DCA"}),e.jsx("button",{onClick:()=>n("RANGE"),className:`flex-1 py-2 text-xs font-bold rounded transition-all ${t==="RANGE"?"bg-purple-600 text-white shadow":"text-gray-400 hover:text-white"}`,children:"RANGE DCA"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase font-bold text-gray-500 mb-2 block",children:"1. Chọn Coin"}),e.jsx("div",{className:"h-32 overflow-y-auto pr-1 grid grid-cols-3 sm:grid-cols-4 gap-2 border border-gray-700/50 rounded-lg p-2 bg-gray-900/30",children:xs.map(N=>e.jsx("button",{onClick:()=>d(N.id),className:`p-2 rounded text-[10px] font-bold border ${h===N.id?"bg-accent-yellow text-gray-900 border-accent-yellow":"bg-gray-700 text-gray-300 border-transparent"}`,children:N.id},N.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase font-bold text-gray-500 mb-1 block",children:"Vốn (USDT)"}),e.jsx("input",{type:"number",value:c,onChange:N=>a(Number(N.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white text-lg outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase font-bold text-gray-500 mb-1 block",children:"Đòn bẩy (x)"}),e.jsx("input",{type:"number",value:y,onChange:N=>m(Number(N.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white text-lg text-center outline-none"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsx("button",{onClick:()=>v("LONG"),className:`py-3 rounded-lg font-bold transition-all ${i==="LONG"?"bg-green-600 text-white ring-2 ring-green-400":"bg-gray-700 text-gray-400"}`,children:"LONG ↗"}),e.jsx("button",{onClick:()=>v("SHORT"),className:`py-3 rounded-lg font-bold transition-all ${i==="SHORT"?"bg-red-600 text-white ring-2 ring-red-400":"bg-gray-700 text-gray-400"}`,children:"SHORT ↘"})]}),t==="CLASSIC"?e.jsx("div",{className:"bg-gray-700/20 p-3 rounded border border-gray-600 space-y-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-xs text-gray-300",children:"Số lệnh DCA (Martingale)"}),e.jsx("input",{type:"number",value:S,onChange:N=>I(Number(N.target.value)),className:"w-16 bg-gray-800 border border-gray-600 rounded p-1 text-center text-white text-sm"})]})}):e.jsxs("div",{className:"bg-purple-900/10 p-3 rounded border border-purple-800/50 space-y-4",children:[e.jsx("p",{className:"text-xs font-bold text-purple-300 uppercase",children:"Cấu hình vùng giá"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-400 block mb-1",children:"Giá Min"}),e.jsx("input",{type:"number",value:T,onChange:N=>C(N.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded p-2 text-white text-sm font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-400 block mb-1",children:"Giá Max"}),e.jsx("input",{type:"number",value:A,onChange:N=>w(N.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded p-2 text-white text-sm font-mono"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-400 block mb-1",children:"Số lệnh (Grid)"}),e.jsx("input",{type:"number",value:x,onChange:N=>L(Number(N.target.value)),className:"w-full bg-gray-800 border border-gray-600 rounded p-2 text-white text-center text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-400 block mb-1",children:"Hệ số nhân Vol"}),e.jsx("input",{type:"number",value:b,onChange:N=>k(Number(N.target.value)),step:"0.1",className:"w-full bg-gray-800 border border-gray-600 rounded p-2 text-white text-center text-sm"})]})]}),e.jsx("p",{className:"text-[10px] text-gray-400 italic mt-1",children:"Hệ số nhân: 1 = Đều volume. 2 = Gấp đôi volume lệnh sau. Tăng hệ số nhân giúp kéo giá TB về gần giá cuối để an toàn hơn."})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Giá hiện tại:"}),e.jsxs("span",{className:`font-mono font-bold flex items-center gap-2 ${u?"text-gray-500 animate-pulse":"text-white"}`,children:[u&&e.jsx(qe,{className:"animate-spin text-xs"}),o?$(o):"Loading..."]})]}),e.jsxs("button",{onClick:X,disabled:!o||u,className:`w-full py-3.5 font-bold rounded-lg shadow-lg active:scale-95 transition-all disabled:opacity-50 uppercase tracking-wide ${t==="CLASSIC"?"bg-blue-600 hover:bg-blue-500 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:["TÍNH TOÁN ",t]})]})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:`bg-gray-800 border rounded-xl p-4 sm:p-6 shadow-lg flex flex-col ${t==="RANGE"?"border-purple-900/50":"border-gray-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-700 pb-2",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Kết quả phân tích"}),f&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:`text-xs px-2 py-1 rounded font-bold ${i==="LONG"?"bg-green-900 text-green-400":"bg-red-900 text-red-400"}`,children:[i," ",h," x",y]}),!f.isSafeRange&&t==="RANGE"&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded font-bold bg-red-600 text-white flex items-center gap-1 animate-pulse",children:[e.jsx(pt,{})," RỦI RO CAO"]})]})]}),f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-gray-700/40 p-3 rounded-lg border border-gray-600/50 flex flex-col justify-center",children:[e.jsx("span",{className:"text-xs text-gray-400 uppercase mb-1",children:"Giá TB (Avg)"}),e.jsx("span",{className:"text-lg font-mono font-bold text-white",children:$(f.avgPrice)})]}),e.jsxs("div",{className:"bg-gray-700/40 p-3 rounded-lg border border-gray-600/50 flex flex-col justify-center",children:[e.jsx("span",{className:"text-xs text-gray-400 uppercase mb-1",children:"Tổng Ký quỹ"}),e.jsx("span",{className:"text-lg font-mono font-bold text-white",children:G(f.totalMargin)})]}),e.jsxs("div",{className:`p-3 rounded-lg border flex flex-col justify-center sm:col-span-2 ${f.isSafeRange?"bg-gray-700/40 border-gray-600/50":"bg-red-900/20 border-red-600"}`,children:[e.jsxs("span",{className:"text-xs text-gray-400 uppercase mb-1 flex justify-between",children:[e.jsx("span",{children:"Giá Thanh Lý"}),!f.isSafeRange&&e.jsx("span",{className:"text-red-400 font-bold",children:"NẰM TRONG VÙNG DCA!"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-red-400 mr-1",children:"Liq:"}),f.isRekt?e.jsx("span",{className:"text-red-500 font-bold",children:"THIẾU VỐN"}):e.jsx("span",{className:"text-lg font-mono font-bold text-red-400",children:$(f.liquidationPrice||0)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs text-accent-yellow mr-1",children:"SL:"}),e.jsx("span",{className:"text-lg font-mono font-bold text-accent-yellow",children:f.suggestedSL?$(f.suggestedSL):"---"})]})]})]})]}),e.jsx("div",{className:"hidden md:block overflow-x-auto rounded-lg border border-gray-700 bg-gray-800 mb-6",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-700/50",children:e.jsxs("tr",{className:"text-gray-400 text-xs uppercase",children:[e.jsx("th",{className:"py-3 px-4",children:"Lệnh"}),e.jsx("th",{className:"py-3 px-4",children:"Giá Entry"}),e.jsx("th",{className:"py-3 px-4",children:"Khoảng cách"}),e.jsx("th",{className:"py-3 px-4",children:"Volume (USDT)"}),e.jsx("th",{className:"py-3 px-4",children:"Margin"})]})}),e.jsx("tbody",{className:"text-sm divide-y divide-gray-700",children:f.plans.map((N,K)=>e.jsxs("tr",{className:"hover:bg-gray-700/30 transition-colors",children:[e.jsxs("td",{className:"py-3 px-4 font-bold text-accent-yellow",children:["#",N.level]}),e.jsx("td",{className:`py-3 px-4 font-mono ${i==="LONG"?"text-green-400":"text-red-400"}`,children:$(N.price)}),e.jsx("td",{className:"py-3 px-4 text-gray-400",children:K===0&&t==="CLASSIC"?"Gốc":`${(Math.abs((N.price-(t==="CLASSIC"?f.plans[0].price:o||0))/(t==="CLASSIC"?f.plans[0].price:o||1))*100).toFixed(2)}%`}),e.jsx("td",{className:"py-3 px-4 text-white font-mono",children:G(N.volume)}),e.jsx("td",{className:"py-3 px-4 font-mono text-gray-300",children:G(N.volume/y)})]},N.level))}),e.jsx("tfoot",{className:"bg-gray-700/20 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"py-3 px-4 text-right text-white",children:"TỔNG:"}),e.jsx("td",{className:"py-3 px-4 text-white",children:G(f.totalVolume)}),e.jsx("td",{className:"py-3 px-4 text-accent-yellow",children:G(f.totalMargin)})]})})]})}),e.jsx("div",{className:"md:hidden space-y-2 mb-6",children:f.plans.map(N=>e.jsxs("div",{className:"bg-gray-700/20 border border-gray-700 rounded-lg p-3 text-xs",children:[e.jsxs("div",{className:"flex justify-between font-bold mb-1",children:[e.jsxs("span",{className:"text-accent-yellow",children:["#",N.level]}),e.jsx("span",{className:i==="LONG"?"text-green-400":"text-red-400",children:$(N.price)})]}),e.jsxs("div",{className:"flex justify-between text-gray-400",children:[e.jsxs("span",{children:["Vol: ",G(N.volume)]}),e.jsxs("span",{children:["Mar: ",G(N.volume/y)]})]})]},N.level))}),!f.isSafeRange&&t==="RANGE"&&e.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-800 rounded-lg text-sm text-red-200 flex gap-3 items-start animate-pulse",children:[e.jsx(bt,{className:"text-xl flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"CẢNH BÁO NGUY HIỂM:"}),e.jsx("br",{}),"Giá thanh lý ",$(f.liquidationPrice||0)," nằm trong khoảng giá DCA ",$(parseFloat(T))," - ",$(parseFloat(A)),".",e.jsx("br",{}),"👉 ",e.jsx("strong",{children:"Giải pháp:"})," Tăng hệ số nhân Volume (Multiplier) hoặc Giảm Đòn bẩy."]})]})]}):e.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-gray-500 border-2 border-dashed border-gray-700 rounded-xl min-h-[300px] bg-gray-800/50",children:[e.jsx(Je,{className:"text-4xl mb-3 opacity-50"}),e.jsx("p",{children:'Chọn chế độ và nhấn "Tính toán"'})]})]})})]})]})}const Ee=[{id:"custom",name:"-- Nhập tay (Custom) --",apiKey:"",secretKey:"",balance:0},{id:"user_01",name:"Nguyễn Văn A (Main)",apiKey:"vmPUZE6mv9sd...",secretKey:"NhqPtMdSJ...",balance:2450.5},{id:"user_02",name:"Invest Fund (Sub)",apiKey:"AbCxE6mv9sd...",secretKey:"XyZPtMdS...",balance:15e3}],ms=[{id:"BTC",name:"Bitcoin"},{id:"ETH",name:"Ethereum"},{id:"BNB",name:"Binance Coin"},{id:"SOL",name:"Solana"},{id:"XRP",name:"Ripple"},{id:"ADA",name:"Cardano"},{id:"DOGE",name:"Dogecoin"},{id:"DOT",name:"Polkadot"},{id:"MATIC",name:"Polygon"},{id:"LTC",name:"Litecoin"}],gs=Array.from({length:24},(t,n)=>n),hs=Array.from({length:60},(t,n)=>n),We=[{val:1,label:"Thứ 2"},{val:2,label:"Thứ 3"},{val:3,label:"Thứ 4"},{val:4,label:"Thứ 5"},{val:5,label:"Thứ 6"},{val:6,label:"Thứ 7"},{val:0,label:"Chủ Nhật"}],ps=Array.from({length:28},(t,n)=>n+1);function bs(){const[t,n]=ft(),h=t.get("tab")||"DEMO",[d,o]=r.useState(h);r.useEffect(()=>{const s=t.get("tab")||"DEMO";(s==="DEMO"||s==="REAL"||s==="BACKTEST")&&o(s)},[t]);const[g,u]=r.useState("BTC"),[l,c]=r.useState(100),[a,y]=r.useState("WEEKLY"),[m,i]=r.useState(1),[v,S]=r.useState(7),[I,T]=r.useState(0),[C,A]=r.useState(1),[w,x]=r.useState(1),[L,b]=r.useState("custom"),[k,f]=r.useState(""),[F,$]=r.useState(""),[G,X]=r.useState(!1),[N,K]=r.useState(0),[q,re]=r.useState([]),[_,ae]=r.useState(1e4),[se,Y]=r.useState([]),[Q,de]=r.useState(!1),[ee,ne]=r.useState(!1),[be,me]=r.useState(0),[M,p]=r.useState(null),[D,O]=r.useState(null),J=r.useRef(null),z=r.useRef(null);r.useEffect(()=>{const s=localStorage.getItem("dca_demo_plans"),j=localStorage.getItem("dca_demo_balance");if(s)try{Y(JSON.parse(s))}catch(E){console.error("Failed to parse demo plans",E)}j&&ae(parseFloat(j))},[]);const ge=s=>{var j;if(s.recurrence==="DAILY")return`${String(s.targetHour||0).padStart(2,"0")}:${String(s.targetMinute||0).padStart(2,"0")} hàng ngày`;if(s.recurrence==="WEEKLY"){const E=s.targetWeekday||1;return`${((j=We.find(R=>R.val===E))==null?void 0:j.label)||`Thứ ${E+1}`}, ${String(s.targetHour||0).padStart(2,"0")}:${String(s.targetMinute||0).padStart(2,"0")}`}else if(s.recurrence==="MONTHLY")return`Ngày ${s.targetDate||1}, ${String(s.targetHour||0).padStart(2,"0")}:${String(s.targetMinute||0).padStart(2,"0")}`;return""},fe=s=>{if(!s)return new Date().toLocaleString("vi-VN");try{let j=new Date(s);return isNaN(j.getTime())&&(j=new Date(s.replace(" ","T"))),isNaN(j.getTime())?s:j.toLocaleString("vi-VN")}catch(j){return console.error("Error formatting date:",s,j),s||new Date().toLocaleString("vi-VN")}},xe=async()=>{de(!0);try{const s=localStorage.getItem("userId")||"demo_user",j=await B.get(`/api/dca/demo/plans/${s}`);if(j.data&&j.data.length>0){const E=await Promise.all(j.data.map(async P=>{let R=[];try{const H=await B.get(`/api/dca/demo/transactions/${P.id}`);H.data&&Array.isArray(H.data)&&H.data.length>0&&(R=[...H.data].sort((V,ue)=>{const he=new Date(V.date||0).getTime();return new Date(ue.date||0).getTime()-he}).map(V=>(V.date||console.warn("Transaction missing date:",V),{id:V.id||`tx_${Date.now()}_${Math.random()}`,date:fe(V.date),price:V.price||0,amountUsdt:V.amountUSDT||V.amountUsdt||0,amountCoin:V.amountCoin||0,status:V.status||"SUCCESS"})))}catch(H){console.error("Failed to load transactions for plan",P.id,H)}return{id:P.id,symbol:P.symbol||"",amount:P.amountUSD||0,frequency:P.recurrence||"WEEKLY",detailTime:ge(P),nextRun:P.nextRun||"",status:P.active?"RUNNING":"PAUSED",accountName:P.username||"Database Plan",totalInvested:P.totalInvested||0,currentValue:P.currentValue||0,createdAt:P.createdAt||"",completedAt:P.completedAt||"",transactions:R}}));Y(E)}else Y([])}catch(s){console.error("Failed to load demo plans from database",s),Y([])}finally{de(!1)}};r.useEffect(()=>{d==="DEMO"&&xe()},[d]),r.useEffect(()=>{localStorage.setItem("dca_demo_plans",JSON.stringify(se))},[se]),r.useEffect(()=>{localStorage.setItem("dca_demo_balance",_.toString())},[_]);const Z=s=>{const j=s.target.value;b(j);const E=Ee.find(P=>P.id===j);E?(f(E.apiKey),$(E.secretKey),K(E.balance)):(f(""),$(""),K(0))},U=()=>{var R;let s="";const j=String(v).padStart(2,"0"),E=String(I).padStart(2,"0");a==="DAILY"&&(s=`${j}:${E} hàng ngày`),a==="WEEKLY"&&(s=`Thứ ${C===0?"CN":C+1}, ${j}:${E}`),a==="MONTHLY"&&(s=`Ngày ${w}, ${j}:${E}`);const P={id:Date.now(),symbol:g,amount:l,frequency:a,detailTime:s,nextRun:"2025-02-01 07:00",status:"RUNNING",accountName:((R=Ee.find(H=>H.id===L))==null?void 0:R.name)||"Custom Key",totalInvested:0,currentValue:0,createdAt:new Date().toISOString(),transactions:[]};if(!k)return alert("Vui lòng chọn tài khoản hoặc nhập API Key!");if(N<l)return alert("Số dư thực tế không đủ!");re([P,...q]),alert("✅ Đã kích hoạt Plan Real thành công!")},ve=s=>{const j=95e3+Math.random()*2e3,E={id:Date.now(),date:new Date().toLocaleString(),price:j,amountUsdt:l,amountCoin:l/j,status:"SUCCESS"};if(N<l)return alert("Số dư không đủ!");K(P=>P-l),re(P=>P.map(R=>R.id===s?{...R,totalInvested:R.totalInvested+l,currentValue:R.currentValue+l,transactions:[E,...R.transactions]}:R))},st=async s=>{if(window.confirm("Bạn có chắc chắn muốn xóa Demo Plan này không?"))try{await B.delete(`/api/dca/demo/plan/${s}`),await xe()}catch(j){console.error("Failed to delete plan from database",j),alert("❌ Lỗi khi xóa plan. Vui lòng thử lại!")}},rt=s=>{window.confirm("Bạn có chắc chắn muốn xóa Plan này không?")&&re(j=>j.filter(E=>E.id!==s))},at=async s=>{if(_<s.amount){alert("Số dư Demo không đủ!");return}const j=95e3+Math.random()*2e3,E=s.amount/j,P={planId:s.id.toString(),userId:localStorage.getItem("userId")||"demo_user",symbol:s.symbol,side:"BUY",price:j,amountUSDT:s.amount,amountCoin:E,date:new Date().toISOString(),status:"SUCCESS"},R={id:Date.now(),date:new Date().toLocaleString("vi-VN"),price:j,amountUsdt:s.amount,amountCoin:E,status:"SUCCESS"};ae(H=>H-s.amount),Y(H=>H.map(W=>W.id===s.id?{...W,totalInvested:(W.totalInvested||0)+s.amount,currentValue:(W.currentValue||0)+s.amount,transactions:[R,...W.transactions||[]]}:W));try{await B.post("/api/dca/demo/transaction",P),setTimeout(async()=>{await xe()},300)}catch(H){console.error("Failed to save transaction to database",H),ae(W=>W+s.amount),Y(W=>W.map(V=>V.id===s.id?{...V,totalInvested:(V.totalInvested||0)-s.amount,currentValue:(V.currentValue||0)-s.amount,transactions:(V.transactions||[]).filter(ue=>ue.id!==R.id)}:V)),alert("❌ Lỗi khi lưu giao dịch. Vui lòng thử lại!")}},nt=async(s,j,E)=>{let P=[],R=j;const H="1h",W=1e3,V=E-j;let ue=0;const he=200;for(;R<E&&ue<he;){ue++;try{const ie=(await B.get("https://api.binance.com/api/v3/klines",{params:{symbol:`${s}USDT`,interval:H,startTime:R,endTime:E,limit:W}})).data;if(!ie||ie.length===0)break;P=[...P,...ie],R=ie[ie.length-1][0]+1,me(Math.min(99,Math.floor((ie[ie.length-1][0]-j)/V*100))),await new Promise(ce=>setTimeout(ce,20))}catch{break}}return me(100),P},lt=async()=>{ne(!0),me(0),p(null);try{const s=new Date,j=new Date;j.setFullYear(j.getFullYear()-m);const E=await nt(g,j.getTime(),s.getTime());if(!E||E.length===0){alert("Không có dữ liệu lịch sử."),ne(!1);return}let P=0,R=0,H=0;const W=new Map;for(let ce=0;ce<E.length;ce++){const Te=E[ce][0],ot=parseFloat(E[ce][1]),it=parseFloat(E[ce][4]),we=new Date(Te),ct=we.getHours(),dt=we.getDay(),xt=we.getDate(),Re=we.toISOString().split("T")[0];let Se=!1;ct===v&&(a==="DAILY"||a==="WEEKLY"&&dt===C||a==="MONTHLY"&&xt===w)&&(Se=!0),Se&&(P+=l/ot,R+=l,H++),R>0&&W.set(Re,{time:Re,value:P*it,invested:R})}const V=Array.from(W.values()).sort((ce,Te)=>new Date(ce.time).getTime()-new Date(Te.time).getTime()),ue=parseFloat(E[E.length-1][4]),he=P*ue,ye=he-R,ie=R>0?ye/R*100:0;p({symbol:g,totalInvested:R,currentValue:he,totalCoins:P,pnl:ye,roe:ie,avgPrice:R>0?R/P:0,buyCount:H,history:V})}catch(s){console.error(s),alert("Lỗi tính toán.")}finally{ne(!1)}};r.useEffect(()=>{if(d!=="BACKTEST"||!M||!J.current)return;z.current&&(z.current.remove(),z.current=null);const s=Pe(J.current,{layout:{background:{type:Me.Solid,color:"transparent"},textColor:"#9CA3AF"},grid:{vertLines:{color:"#374151"},horzLines:{color:"#374151"}},width:J.current.clientWidth,height:300,rightPriceScale:{borderVisible:!1},timeScale:{borderVisible:!1,timeVisible:!0}}),j=s.addLineSeries({color:"#22c55e",lineWidth:2}),E=s.addLineSeries({color:"#fbbf24",lineWidth:2,lineStyle:2}),P=M.history.map(W=>({time:W.time,value:W.value})),R=M.history.map(W=>({time:W.time,value:W.invested}));P.length>0&&(j.setData(P),E.setData(R),s.timeScale().fitContent()),z.current=s;const H=()=>{J.current&&z.current&&z.current.applyOptions({width:J.current.clientWidth})};return window.addEventListener("resize",H),()=>{window.removeEventListener("resize",H),z.current&&(z.current.remove(),z.current=null)}},[M,d]);const oe=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}).format(s);return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-100 pb-20 md:p-6 md:pb-6",children:[e.jsxs("div",{className:"p-4 bg-gray-900 border-b border-gray-800 md:border-none md:bg-transparent md:p-0 flex flex-row items-center gap-4 mb-0 md:mb-6 sticky top-0 z-40",children:[e.jsx(pe,{to:"/",className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-800 hover:bg-gray-700 transition text-gray-300 hover:text-white border border-gray-700",children:e.jsx(Xe,{})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg md:text-3xl font-bold text-white flex items-center gap-2",children:[e.jsx(je,{className:"text-accent-yellow"})," ",e.jsx("span",{children:"DCA Master"})]}),e.jsx("p",{className:"text-gray-500 text-xs md:text-sm",children:"Tích sản Tự động"})]})]}),e.jsxs("div",{className:"flex p-1 bg-gray-900 rounded-lg mb-6 border border-gray-700",children:[e.jsx("button",{onClick:()=>{o("DEMO"),n({tab:"DEMO"})},className:`flex-1 py-2 text-xs font-bold rounded transition-all ${d==="DEMO"?"bg-purple-600 text-white shadow":"text-gray-400 hover:text-white"}`,children:"DEMO"}),e.jsx("button",{onClick:()=>{o("REAL"),n({tab:"REAL"})},className:`flex-1 py-2 text-xs font-bold rounded transition-all ${d==="REAL"?"bg-green-600 text-white shadow":"text-gray-400 hover:text-white"}`,children:"REAL"}),e.jsx("button",{onClick:()=>{o("BACKTEST"),n({tab:"BACKTEST"})},className:`flex-1 py-2 text-xs font-bold rounded transition-all ${d==="BACKTEST"?"bg-blue-600 text-white shadow":"text-gray-400 hover:text-white"}`,children:"BACKTEST"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-0 md:gap-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"lg:col-span-1 bg-gray-900 md:bg-gray-800 border-b md:border border-gray-800 md:rounded-xl p-5 md:p-6 shadow-none md:shadow-lg h-fit",children:[e.jsxs("h2",{className:"text-base font-bold mb-5 text-white flex items-center gap-2 pb-3 border-b border-gray-800",children:[e.jsx(yt,{className:"text-accent-yellow"})," Cấu hình ",d==="REAL"?"Đầu tư":"Kiểm thử"]}),e.jsxs("div",{className:"space-y-5",children:[d==="REAL"&&e.jsxs("div",{className:"bg-green-900/10 border border-green-800/50 rounded-lg p-3 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-green-400 text-[10px] font-bold uppercase tracking-wider",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ge,{})," Tài khoản"]}),e.jsx("span",{className:k?"text-green-400":"text-gray-500",children:k?"● Connected":"○ No Key"})]}),e.jsx("select",{value:L,onChange:Z,className:"w-full bg-gray-950 border border-gray-700 rounded-lg px-3 py-2.5 text-sm text-white outline-none",children:Ee.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))}),L==="custom"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"API Key",value:k,onChange:s=>f(s.target.value),className:"w-full bg-gray-950 border border-gray-700 rounded px-3 py-2 text-xs text-white"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:G?"text":"password",placeholder:"Secret Key",value:F,onChange:s=>$(s.target.value),className:"w-full bg-gray-950 border border-gray-700 rounded px-3 py-2 text-xs text-white pr-8"}),e.jsx("button",{className:"absolute right-2 top-2 text-gray-400",onClick:()=>X(!G),children:G?e.jsx(Ye,{size:14}):e.jsx(_e,{size:14})})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-green-800/20",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Số dư khả dụng"}),e.jsx("span",{className:"text-lg font-bold text-white",children:oe(N)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1.5 block",children:"Chọn Coin"}),e.jsx("select",{value:g,onChange:s=>u(s.target.value),className:"w-full bg-gray-950 border border-gray-700 rounded-lg p-3 text-white outline-none text-sm font-bold",children:ms.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1.5 block",children:"Số tiền (USDT)"}),e.jsx("input",{type:"number",inputMode:"decimal",value:l,onChange:s=>c(Number(s.target.value)),className:"w-full bg-gray-950 border border-gray-700 rounded-lg p-3 text-white outline-none text-sm font-bold font-mono"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1.5 block",children:"Tần suất mua"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["DAILY","WEEKLY","MONTHLY"].map(s=>e.jsx("button",{onClick:()=>y(s),className:`py-2.5 rounded-lg text-[10px] sm:text-xs font-bold transition-all border ${a===s?"bg-blue-600 border-blue-500 text-white shadow-md":"bg-gray-950 border-gray-700 text-gray-400"}`,children:s==="DAILY"?"Hàng Ngày":s==="WEEKLY"?"Hàng Tuần":"Hàng Tháng"},s))})]}),e.jsxs("div",{className:"bg-gray-950/50 p-3 rounded-lg border border-gray-800 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300 font-bold",children:[e.jsx(jt,{className:"text-accent-yellow"})," Thời điểm khớp lệnh"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Giờ"}),e.jsx("select",{value:v,onChange:s=>S(Number(s.target.value)),className:"w-full bg-gray-900 border border-gray-700 rounded p-2 text-xs text-white outline-none",children:gs.map(s=>e.jsx("option",{value:s,children:String(s).padStart(2,"0")},s))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Phút"}),e.jsx("select",{value:I,onChange:s=>T(Number(s.target.value)),className:"w-full bg-gray-900 border border-gray-700 rounded p-2 text-xs text-white outline-none",children:hs.map(s=>e.jsx("option",{value:s,children:String(s).padStart(2,"0")},s))})]}),a!=="DAILY"&&e.jsxs("div",{className:"space-y-1 col-span-2 md:col-span-1",children:[e.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold",children:a==="WEEKLY"?"Thứ":"Ngày"}),e.jsx("select",{value:a==="WEEKLY"?C:w,onChange:s=>a==="WEEKLY"?A(Number(s.target.value)):x(Number(s.target.value)),className:"w-full bg-gray-900 border border-gray-700 rounded p-2 text-xs text-white outline-none",children:a==="WEEKLY"?We.map(s=>e.jsx("option",{value:s.val,children:s.label},s.val)):ps.map(s=>e.jsxs("option",{value:s,children:["Ngày ",s]},s))})]})]})]}),d==="BACKTEST"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1.5 block",children:"Dữ liệu quá khứ"}),e.jsxs("select",{value:m,onChange:s=>i(Number(s.target.value)),className:"w-full bg-gray-950 border border-gray-700 rounded-lg p-3 text-white outline-none text-sm",children:[e.jsx("option",{value:"1",children:"1 Năm qua"}),e.jsx("option",{value:"3",children:"3 Năm qua"}),e.jsx("option",{value:"5",children:"5 Năm qua"}),e.jsx("option",{value:"10",children:"10 Năm qua"})]})]}),e.jsx("div",{className:"pt-2 pb-4 md:pb-0 space-y-2",children:d==="BACKTEST"?e.jsxs("button",{onClick:lt,disabled:ee,className:"w-full py-4 bg-accent-yellow hover:bg-yellow-500 text-gray-900 font-bold rounded-xl shadow-lg active:scale-95 transition disabled:opacity-50 flex items-center justify-center gap-2 uppercase tracking-wide text-sm",children:[ee?e.jsx("span",{className:"animate-spin",children:"↻"}):e.jsx(Nt,{}),ee?`Loading ${be}%`:"CHẠY BACKTEST"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:async()=>{if(!g||!l)return alert("Vui lòng chọn Coin và số tiền!");String(v).padStart(2,"0"),String(I).padStart(2,"0");const s={userId:localStorage.getItem("userId")||"demo_user",symbol:`${g}USDT`,amountUSD:l,side:"BUY",recurrence:a,targetHour:v,targetMinute:I,targetWeekday:a==="WEEKLY"?C:null,targetDate:a==="MONTHLY"?w:null,active:!0};try{const j=await B.post("/api/dca/demo/plan",s);j.data&&j.data.id&&(alert("✅ Đã tạo Demo Plan thành công! Dữ liệu đã lưu vào Database."),await xe(),o("DEMO"),n({tab:"DEMO"}))}catch(j){console.error(j),alert("❌ Lỗi khi tạo Demo Plan. Vui lòng thử lại!")}},className:"w-full py-3 font-bold rounded-xl shadow-lg active:scale-95 transition flex items-center justify-center gap-2 text-sm uppercase tracking-wide bg-purple-600 hover:bg-purple-500 text-white",children:[e.jsx(je,{})," TẠO DEMO PLAN (Database)"]}),e.jsxs("button",{onClick:U,className:"w-full py-3 font-bold rounded-xl shadow-lg active:scale-95 transition flex items-center justify-center gap-2 text-sm uppercase tracking-wide bg-green-600 hover:bg-green-500 text-white",children:[e.jsx(vt,{})," KÍCH HOẠT LỆNH THẬT"]})]})})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4 md:space-y-6 px-0 md:px-0",children:[d==="DEMO"&&e.jsxs("div",{className:"bg-gray-900 md:bg-gray-800 md:border border-gray-800 md:rounded-xl p-4 md:p-6 shadow-none md:shadow-lg min-h-[400px]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 px-2 md:px-0",children:[e.jsxs("h2",{className:"text-lg md:text-xl font-bold flex items-center gap-2 text-purple-400",children:[e.jsx(je,{})," Danh sách Plan DEMO"]}),e.jsxs("span",{className:"text-xs bg-purple-900/30 text-purple-300 px-2 py-1 rounded border border-purple-800",children:["Demo Balance: ",oe(_)]})]}),Q&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("span",{className:"animate-spin text-purple-500 text-2xl",children:"↻"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Đang tải từ Database..."})]}),!Q&&se.length>0&&e.jsxs("div",{className:"space-y-3",children:[se.map(s=>e.jsxs("div",{className:"bg-gray-800 md:bg-gray-700/20 border border-gray-700 md:border-gray-600 rounded-xl overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm shadow-sm bg-purple-900 text-purple-400",children:s.symbol.substring(0,3)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-white",children:s.symbol}),e.jsx("span",{className:"text-[10px] bg-gray-700 text-gray-300 px-1.5 py-0.5 rounded",children:s.frequency})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[e.jsxs("span",{className:"text-white font-bold",children:[s.amount,"$"]})," / lần"]})]})]}),e.jsxs("button",{onClick:()=>O(D===s.id?null:s.id),className:"text-xs bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded-lg flex items-center gap-1 border border-gray-600 transition",children:[e.jsx(Oe,{})," Chi tiết"]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-700/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Đã đầu tư"}),e.jsx("p",{className:"text-sm text-white font-bold font-mono",children:oe(s.totalInvested)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>at(s),className:"text-[10px] bg-gray-800 border border-gray-600 px-3 py-1.5 rounded-full text-gray-300 hover:text-white hover:bg-gray-700 transition",children:"Test"}),e.jsx("button",{onClick:()=>st(s.id),className:"text-[10px] bg-red-900/20 border border-red-800 px-3 py-1.5 rounded-full text-red-400 hover:bg-red-900/40",children:e.jsx($e,{})})]})]})]}),D===s.id&&e.jsxs("div",{className:"bg-gray-950/50 border-t border-gray-700 p-4",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:"Lịch sử giao dịch"}),s.transactions.length===0?e.jsx("p",{className:"text-center text-xs text-gray-500 italic py-4 border border-dashed border-gray-800 rounded",children:"Chưa có giao dịch nào."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-xs whitespace-nowrap",children:[e.jsx("thead",{className:"text-gray-500 border-b border-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pl-2",children:"Time"}),e.jsx("th",{className:"py-2",children:"Price"}),e.jsx("th",{className:"py-2",children:"Amount"}),e.jsx("th",{className:"py-2 text-right pr-2",children:"Total"})]})}),e.jsx("tbody",{className:"text-gray-300 divide-y divide-gray-800",children:s.transactions.map(j=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-2 text-gray-500",children:j.date}),e.jsxs("td",{className:"py-2 font-mono text-accent-yellow",children:["$",j.price.toFixed(0)]}),e.jsx("td",{className:"py-2 font-mono",children:j.amountCoin.toFixed(5)}),e.jsx("td",{className:"py-2 font-mono font-bold text-right pr-2",children:oe(j.amountUsdt)})]},j.id))})]})})]})]},s.id)),se.length===0&&!Q&&e.jsxs("div",{className:"text-center py-12 bg-gray-900/50 rounded-xl border-2 border-dashed border-gray-700 mx-4 md:mx-0",children:[e.jsx(je,{className:"text-4xl text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Chưa có kế hoạch DEMO nào."}),e.jsx("button",{onClick:()=>{let s="";const j=String(v).padStart(2,"0"),E=String(I).padStart(2,"0");a==="DAILY"&&(s=`${j}:${E} hàng ngày`),a==="WEEKLY"&&(s=`Thứ ${C===0?"CN":C+1}, ${j}:${E}`),a==="MONTHLY"&&(s=`Ngày ${w}, ${j}:${E}`);const P={id:Date.now(),symbol:g,amount:l,frequency:a,detailTime:s,nextRun:"2025-02-01 07:00",status:"RUNNING",accountName:"Demo Account",totalInvested:0,currentValue:0,transactions:[]};Y([P,...se])},className:"mt-4 text-xs bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg transition",children:"Tạo Plan DEMO"})]})]})]}),d==="REAL"&&e.jsxs("div",{className:"bg-gray-900 md:bg-gray-800 md:border border-gray-800 md:rounded-xl p-4 md:p-6 shadow-none md:shadow-lg min-h-[400px]",children:[e.jsx("div",{className:"flex justify-between items-center mb-6 px-2 md:px-0",children:e.jsxs("h2",{className:"text-lg md:text-xl font-bold flex items-center gap-2 text-green-400",children:[e.jsx(Be,{})," Danh sách Plan REAL"]})}),e.jsxs("div",{className:"space-y-3",children:[q.map(s=>e.jsxs("div",{className:"bg-gray-800 md:bg-gray-700/20 border border-gray-700 md:border-gray-600 rounded-xl overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm shadow-sm bg-green-900 text-green-400",children:s.symbol.substring(0,3)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-white",children:s.symbol}),e.jsx("span",{className:"text-[10px] bg-gray-700 text-gray-300 px-1.5 py-0.5 rounded",children:s.frequency})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[e.jsxs("span",{className:"text-white font-bold",children:[s.amount,"$"]})," / lần"]})]})]}),e.jsxs("button",{onClick:()=>O(D===s.id?null:s.id),className:"text-xs bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded-lg flex items-center gap-1 border border-gray-600 transition",children:[e.jsx(Oe,{})," Chi tiết"]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-700/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Đã đầu tư"}),e.jsx("p",{className:"text-sm text-white font-bold font-mono",children:oe(s.totalInvested)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ve(s.id),className:"text-[10px] bg-gray-800 border border-gray-600 px-3 py-1.5 rounded-full text-gray-300 hover:text-white hover:bg-gray-700 transition",children:"Test"}),e.jsx("button",{onClick:()=>rt(s.id),className:"text-[10px] bg-red-900/20 border border-red-800 px-3 py-1.5 rounded-full text-red-400 hover:bg-red-900/40",children:e.jsx($e,{})})]})]})]}),D===s.id&&e.jsxs("div",{className:"bg-gray-950/50 border-t border-gray-700 p-4 animate-fadeIn",children:[e.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase mb-2 flex justify-between",children:[e.jsx("span",{children:"Lịch sử giao dịch"}),e.jsx("span",{className:"text-gray-500 truncate max-w-[150px]",children:s.accountName})]}),s.transactions.length===0?e.jsx("p",{className:"text-center text-xs text-gray-500 italic py-4 border border-dashed border-gray-800 rounded",children:"Chưa có giao dịch nào."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-xs whitespace-nowrap",children:[e.jsx("thead",{className:"text-gray-500 border-b border-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pl-2",children:"Time"}),e.jsx("th",{className:"py-2",children:"Price"}),e.jsx("th",{className:"py-2",children:"Amount"}),e.jsx("th",{className:"py-2 text-right pr-2",children:"Total"})]})}),e.jsx("tbody",{className:"text-gray-300 divide-y divide-gray-800",children:s.transactions.map(j=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-2 text-gray-500",children:j.date}),e.jsxs("td",{className:"py-2 font-mono text-accent-yellow",children:["$",j.price.toFixed(0)]}),e.jsx("td",{className:"py-2 font-mono",children:j.amountCoin.toFixed(5)}),e.jsx("td",{className:"py-2 font-mono font-bold text-right pr-2",children:oe(j.amountUsdt)})]},j.id))})]})})]})]},s.id)),q.length===0&&e.jsxs("div",{className:"text-center py-12 bg-gray-900/50 rounded-xl border-2 border-dashed border-gray-700 mx-4 md:mx-0",children:[e.jsx(je,{className:"text-4xl text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Chưa có kế hoạch nào."})]})]})]}),d==="BACKTEST"&&e.jsxs("div",{className:"bg-gray-900 md:bg-gray-800 border-y md:border border-gray-800 md:rounded-xl p-4 md:p-6 shadow-none md:shadow-lg h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 px-2 md:px-0",children:[e.jsxs("h2",{className:"text-lg md:text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Je,{className:"text-blue-400"})," Kết quả Backtest"]}),M&&e.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded border ${M.roe>=0?"bg-green-900/30 text-green-400 border-green-800":"bg-red-900/30 text-red-400 border-red-800"}`,children:["ROE: ",M.roe>0?"+":"",M.roe.toFixed(2),"%"]})]}),M?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 px-2 md:px-0",children:[e.jsxs("div",{className:"bg-gray-800 md:bg-gray-700/30 p-3 rounded-lg border border-gray-700 md:border-gray-600/50",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Tổng Vốn"}),e.jsx("p",{className:"text-lg font-bold text-gray-300",children:oe(M.totalInvested)})]}),e.jsxs("div",{className:"bg-gray-800 md:bg-gray-700/30 p-3 rounded-lg border border-gray-700 md:border-gray-600/50",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Giá trị hiện tại"}),e.jsx("p",{className:"text-lg font-bold text-white",children:oe(M.currentValue)})]}),e.jsxs("div",{className:"bg-gray-800 md:bg-gray-700/30 p-3 rounded-lg border border-gray-700 md:border-gray-600/50",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Lãi / Lỗ"}),e.jsxs("p",{className:`text-lg font-bold ${M.pnl>=0?"text-green-400":"text-red-400"}`,children:[M.pnl>=0?"+":"",oe(M.pnl)]})]}),e.jsxs("div",{className:"bg-gray-800 md:bg-gray-700/30 p-3 rounded-lg border border-gray-700 md:border-gray-600/50",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Giá TB Mua"}),e.jsxs("p",{className:"text-lg font-bold text-accent-yellow",children:["$",M.avgPrice.toLocaleString()]})]})]}),e.jsx("div",{className:"flex-grow bg-gray-950 md:bg-gray-900 border border-gray-800 md:border-gray-700 rounded-lg p-1 relative min-h-[300px] mx-2 md:mx-0",children:e.jsx("div",{ref:J,className:"absolute inset-0 w-full h-full"})})]}):e.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-gray-500 min-h-[300px] bg-gray-900/30 rounded-xl border border-dashed border-gray-800 mx-4 md:mx-0",children:[e.jsx(Be,{className:"text-5xl mb-4 opacity-20"}),e.jsx("p",{className:"text-sm",children:"Chạy Backtest để xem kết quả"}),ee&&e.jsx("div",{className:"mt-4 w-1/2 bg-gray-700 rounded-full h-1.5",children:e.jsx("div",{className:"bg-accent-yellow h-1.5 rounded-full transition-all duration-300",style:{width:`${be}%`}})})]})]})]})]})]})}function fs(){return e.jsx(wt,{children:e.jsx(Lt,{children:e.jsxs(St,{children:[e.jsx(le,{path:"/login",element:e.jsx(Ot,{})}),e.jsx(le,{path:"/register",element:e.jsx(ds,{})}),e.jsxs(le,{path:"/",element:e.jsx(Tt,{children:e.jsx(Wt,{})}),children:[e.jsx(le,{index:!0,element:e.jsx(Ve,{to:"/monitor",replace:!0})}),e.jsx(le,{path:"users",element:e.jsx(Yt,{})}),e.jsx(le,{path:"history",element:e.jsx(Xt,{})}),e.jsx(le,{path:"monitor",element:e.jsx(ts,{})}),e.jsx(le,{path:"monitor/:symbol",element:e.jsx(cs,{})}),e.jsx(le,{path:"/strategy",element:e.jsx(us,{})}),e.jsx(le,{path:"/dca",element:e.jsx(bs,{})})]})]})})})}const tt=document.getElementById("root");if(!tt)throw new Error("Could not find root element to mount to");const ys=Ct.createRoot(tt);ys.render(e.jsx(kt.StrictMode,{children:e.jsx(fs,{})}));
